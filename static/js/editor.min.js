(function(zc){function Xb(f){return f=Yb?f.replace("Ctrl","Cmd"):f.replace("Cmd","Ctrl")}function qb(f,n){n=n||{};var t=document.createElement("a"),v=n.shortcut||W[f];v&&(v=Xb(v),t.title=v,t.title=t.title.replace("Cmd","\u2318"),Yb&&(t.title=t.title.replace("Alt","\u2325")));t.className=n.className||"icon-"+f;return t}function ca(f,n){n=n||f.getCursor("start");var t=f.getTokenAt(n);if(!t.type)return{};t=t.type.split(" ");for(var v={},r,x=0;x<t.length;x++)r=t[x],"strong"===r?v.bold=!0:"variable-2"===
r?(r=f.getLine(n.line),/^\s*\d+\.\s/.test(r)?v["ordered-list"]=!0:v["unordered-list"]=!0):"atom"===r?v.quote=!0:"em"===r&&(v.italic=!0);return v}function rb(f){f=f.codemirror.getWrapperElement();var n=document,t=function(){n.cancelFullScreen?n.cancelFullScreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitCancelFullScreen&&n.webkitCancelFullScreen()};n.fullScreen||n.mozFullScreen||n.webkitFullScreen?t&&t():f.requestFullScreen?f.requestFullScreen():f.mozRequestFullScreen?f.mozRequestFullScreen():
f.webkitRequestFullScreen&&f.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}function da(f){f=f.codemirror;var n=ca(f),t="**",v="**",r=f.getCursor("start"),x=f.getCursor("end");n.bold?(n=f.getLine(r.line),t=n.slice(0,r.ch),v=n.slice(r.ch),t=t.replace(/^(.*)?(\*|_){2}(\S+.*)?$/,"$1$3"),v=v.replace(/^(.*\S+)?(\*|_){2}(\s+.*)?$/,"$1$3"),r.ch-=2,x.ch-=2,f.setLine(r.line,t+v)):(n=f.getSelection(),f.replaceSelection(t+n+v),r.ch+=2,x.ch+=2);f.setSelection(r,x);f.focus()}function Ba(f){f=f.codemirror;
var n=ca(f),t="*",v="*",r=f.getCursor("start"),x=f.getCursor("end");n.italic?(n=f.getLine(r.line),t=n.slice(0,r.ch),v=n.slice(r.ch),t=t.replace(/^(.*)?(\*|_)(\S+.*)?$/,"$1$3"),v=v.replace(/^(.*\S+)?(\*|_)(\s+.*)?$/,"$1$3"),--r.ch,--x.ch,f.setLine(r.line,t+v)):(n=f.getSelection(),f.replaceSelection(t+n+v),r.ch+=1,x.ch+=1);f.setSelection(r,x);f.focus()}function X(f){Ha(f.codemirror,"quote")}function Ia(f){Ha(f.codemirror,"unordered-list")}function ea(f){Ha(f.codemirror,"ordered-list")}function Y(f){f=
f.codemirror;var n=ca(f);Zb(f,n.link,"[","](http://)")}function T(f){f=f.codemirror;var n=ca(f);Zb(f,n.image,"![","](http://)")}function sb(f){f=f.codemirror;f.undo();f.focus()}function tb(f){f=f.codemirror;f.redo();f.focus()}function na(f){var n=f.toolbar.preview,t=f.constructor.markdown;f=f.codemirror;var v=f.getWrapperElement(),r=v.lastChild;/editor-preview/.test(r.className)||(r=document.createElement("div"),r.className="editor-preview",v.appendChild(r));/editor-preview-active/.test(r.className)?
(r.className=r.className.replace(/\s*editor-preview-active\s*/g,""),n.className=n.className.replace(/\s*active\s*/g,"")):(setTimeout(function(){r.className+=" editor-preview-active"},1),n.className+=" active");n=f.getValue();r.innerHTML=t(n)}function Zb(f,n,t,v){var r=f.getCursor("start"),x=f.getCursor("end");n?(n=f.getLine(r.line),t=n.slice(0,r.ch),v=n.slice(r.ch),f.setLine(r.line,t+v)):(n=f.getSelection(),f.replaceSelection(t+n+v),r.ch+=t.length,x.ch+=t.length);f.setSelection(r,x);f.focus()}function Ha(f,
n){var t=ca(f),v=f.getCursor("start"),r=f.getCursor("end"),x={quote:/^(\s*)>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},oa={quote:"> ","unordered-list":"* ","ordered-list":"1. "};for(v=v.line;v<=r.line;v++){var G=v,A=f.getLine(G);A=t[n]?A.replace(x[n],"$1"):oa[n]+A;f.setLine(G,A)}f.focus()}function A(f){f=f||{};f.element&&(this.element=f.element);f.toolbar=f.toolbar||A.toolbar;f.hasOwnProperty("status")||(f.status=["lines","words","cursor"]);this.options=f;this.element&&
this.render()}var F=function(){function f(a,b){if(!(this instanceof f))return new f(a,b);this.options=b=b||{};for(var c in Ac)!b.hasOwnProperty(c)&&Ac.hasOwnProperty(c)&&(b[c]=Ac[c]);Bc(b);c=this.display=n(a,"string"==typeof b.value?0:b.value.first);c.wrapper.CodeMirror=this;od(this);b.autofocus&&!Cc&&fa(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Dc};A(this);b.lineWrapping&&(this.display.wrapper.className+=
" CodeMirror-wrap");var d=b.value;"string"==typeof d&&(d=new U(b.value,b.mode));D(this,pd)(this,d);N&&setTimeout(pa(Ja,this,!0),20);Xb(this);try{var e=document.activeElement==c.input}catch(h){}e||b.autofocus&&!Cc?setTimeout(pa(Pa,this),20):Ec(this);D(this,function(){for(var a in Ya)if(Ya.propertyIsEnumerable(a))Ya[a](this,b[a],qd);for(a=0;a<Fc.length;++a)Fc[a](this)})()}function n(a,b){var c={},d=c.input=z("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");
ha?d.style.width="1000px":d.setAttribute("wrap","off");ub&&(d.style.border="1px solid black");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck","false");c.inputDiv=z("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");c.scrollbarH=z("div",[z("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");c.scrollbarV=z("div",[z("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");c.scrollbarFiller=z("div",null,"CodeMirror-scrollbar-filler");
c.gutterFiller=z("div",null,"CodeMirror-gutter-filler");c.lineDiv=z("div",null,"CodeMirror-code");c.selectionDiv=z("div",null,null,"position: relative; z-index: 1");c.cursor=z("div","\u00a0","CodeMirror-cursor");c.otherCursor=z("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");c.measure=z("div",null,"CodeMirror-measure");c.lineSpace=z("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none");c.mover=z("div",[z("div",[c.lineSpace],"CodeMirror-lines")],
null,"position: relative");c.sizer=z("div",[c.mover],"CodeMirror-sizer");c.heightForcer=z("div",null,null,"position: absolute; height: "+Za+"px; width: 1px;");c.gutters=z("div",null,"CodeMirror-gutters");c.lineGutter=null;c.scroller=z("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll");c.scroller.setAttribute("tabIndex","-1");c.wrapper=z("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror");$a&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=
0);a.appendChild?a.appendChild(c.wrapper):a(c.wrapper);ub&&(d.style.width="0px");ha||(c.scroller.draggable=!0);Gc?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):$a&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px");c.viewOffset=c.lastSizeC=0;c.showingFrom=c.showingTo=b;c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null;c.prevInput="";c.alignWidgets=!1;c.pollingFast=!1;c.poll=new Dc;c.cachedCharWidth=c.cachedTextHeight=null;c.measureLineCache=[];c.measureLineCachePos=
0;c.inaccurateSelection=!1;c.maxLine=null;c.maxLineLength=0;c.maxLineChanged=!1;c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null;return c}function t(a){a.doc.mode=f.getMode(a.options,a.doc.modeOption);a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;q(a,100);a.state.modeGen++;a.curOp&&O(a)}function v(a){var b=ab(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/Ha(a.display)-3);return function(e){return Qa(a.doc,
e)?0:c?(Math.ceil(e.text.length/d)||1)*b:b}}function r(a){var b=a.doc,c=v(a);b.iter(function(a){var b=c(a);b!=a.height&&qa(a,b)})}function x(a){var b=Ca[a.options.keyMap],c=b.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(c?" cm-keymap-"+c:"");a.state.disableInput=b.disableInput}function A(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");bb(a)}function G(a){od(a);O(a);
setTimeout(function(){ra(a)},20)}function od(a){var b=a.display.gutters,c=a.options.gutters;$b(b);for(var d=0;d<c.length;++d){var e=c[d],h=b.appendChild(z("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=h,h.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function F(a,b){if(0==b.height)return 0;for(var c=b.text.length,d,e=b;d=cb(e,-1);)d=d.find(),e=y(a,d.from.line),c+=d.from.ch-d.to.ch;for(e=b;d=ac(e);)d=d.find(),c-=e.text.length-d.from.ch,
e=y(a,d.to.line),c+=e.text.length-d.to.ch;return c}function Hc(a){var b=a.display,c=a.doc;b.maxLine=y(c,c.first);b.maxLineLength=F(c,b.maxLine);b.maxLineChanged=!0;c.iter(function(a){var d=F(c,a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function Bc(a){for(var b=!1,c=0;c<a.gutters.length;++c)"CodeMirror-linenumbers"==a.gutters[c]&&(a.lineNumbers?b=!0:a.gutters.splice(c--,1));!b&&a.lineNumbers&&a.gutters.push("CodeMirror-linenumbers")}function Ic(a){var b=a.display,c=a.doc.height+(b.mover.offsetHeight-
b.lineSpace.offsetHeight);b.sizer.style.minHeight=b.heightForcer.style.top=c+"px";b.gutters.style.height=Math.max(c,b.scroller.clientHeight-Za)+"px";c=Math.max(c,b.scroller.scrollHeight);var d=b.scroller.scrollWidth>b.scroller.clientWidth+1,e=c>b.scroller.clientHeight+1;e?(b.scrollbarV.style.display="block",b.scrollbarV.style.bottom=d?vb(b.measure)+"px":"0",b.scrollbarV.firstChild.style.height=c-b.scroller.clientHeight+b.scrollbarV.clientHeight+"px"):b.scrollbarV.style.display="";d?(b.scrollbarH.style.display=
"block",b.scrollbarH.style.right=e?vb(b.measure)+"px":"0",b.scrollbarH.firstChild.style.width=b.scroller.scrollWidth-b.scroller.clientWidth+b.scrollbarH.clientWidth+"px"):b.scrollbarH.style.display="";d&&e?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=b.scrollbarFiller.style.width=vb(b.measure)+"px"):b.scrollbarFiller.style.display="";d&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=vb(b.measure)+
"px",b.gutterFiller.style.width=b.gutters.offsetWidth+"px"):b.gutterFiller.style.display="";je&&0===vb(b.measure)&&(b.scrollbarV.style.minWidth=b.scrollbarH.style.minHeight=ke?"18px":"12px")}function Jc(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top);d=Math.floor(d-a.lineSpace.offsetTop);a=Math.ceil(d+e);return{from:wb(b,d),to:wb(b,a)}}function ra(a){var b=a.display;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var c=
sa(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",h=b.lineDiv.firstChild;h;h=h.nextSibling)if(h.alignable)for(var k=0,u=h.alignable;k<u.length;++k)u[k].style.left=e;a.options.fixedGutter&&(b.gutters.style.left=c+d+"px")}}function le(a){if(!a.options.lineNumbers)return!1;var b=a.doc;b=xb(a.options,b.first+b.size-1);a=a.display;if(b.length!=a.lineNumChars){var c=a.measure.appendChild(z("div",[z("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),d=c.firstChild.offsetWidth;
c=c.offsetWidth-d;a.lineGutter.style.width="";a.lineNumInnerWidth=Math.max(d,a.lineGutter.offsetWidth-c);a.lineNumWidth=a.lineNumInnerWidth+c;a.lineNumChars=a.lineNumInnerWidth?b.length:-1;a.lineGutter.style.width=a.lineNumWidth+"px";return!0}return!1}function xb(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function sa(a){return M(a.scroller).left-M(a.sizer).left}function Ra(a,b,c,d){for(var e=a.display.showingFrom,h=a.display.showingTo,k,u=Jc(a.display,a.doc,c);ca(a,b,u,d);){d=
!1;k=!0;wa(a);Ic(a);c&&(c=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,"number"==typeof c?c:c.top));u=Jc(a.display,a.doc,c);if(u.from>=a.display.showingFrom&&u.to<=a.display.showingTo)break;b=[]}k&&(Z(a,"update",a),a.display.showingFrom==e&&a.display.showingTo==h||Z(a,"viewportChange",a,a.display.showingFrom,a.display.showingTo));return k}function ca(a,b,c,d){var e=a.display,h=a.doc;if(!e.wrapper.clientWidth)e.showingFrom=e.showingTo=h.first,e.viewOffset=0;else if(!(!d&&
0==b.length&&c.from>e.showingFrom&&c.to<e.showingTo)){le(a)&&(b=[{from:h.first,to:h.first+h.size}]);var k=e.sizer.style.marginLeft=e.gutters.offsetWidth+"px";e.scrollbarH.style.left=a.options.fixedGutter?k:"0";k=Infinity;if(a.options.lineNumbers)for(var u=0;u<b.length;++u)if(b[u].diff){k=b[u].from;break}u=h.first+h.size;var p=Math.max(c.from-a.options.viewportMargin,h.first);c=Math.min(u,c.to+a.options.viewportMargin);e.showingFrom<p&&20>p-e.showingFrom&&(p=Math.max(h.first,e.showingFrom));e.showingTo>
c&&20>e.showingTo-c&&(c=Math.min(u,e.showingTo));if(yb)for(p=ja(Da(h,y(h,p)));c<u&&Qa(h,y(h,c));)++c;var l=[{from:Math.max(e.showingFrom,h.first),to:Math.min(e.showingTo,u)}];l=l[0].from>=l[0].to?[]:me(l,b);if(yb)for(u=0;u<l.length;++u){b=l[u];for(var g;g=ac(y(h,b.to-1));)if(g=g.find().from.line,g>b.from)b.to=g;else{l.splice(u--,1);break}}for(u=h=0;u<l.length;++u)b=l[u],b.from<p&&(b.from=p),b.to>c&&(b.to=c),b.from>=b.to?l.splice(u--,1):h+=b.to-b.from;if(d||h!=c-p||p!=e.showingFrom||c!=e.showingTo){l.sort(function(a,
b){return a.from-b.from});try{var f=document.activeElement}catch(aa){}h<.7*(c-p)&&(e.lineDiv.style.display="none");ta(a,p,c,l,k);e.lineDiv.style.display="";f&&document.activeElement!=f&&f.offsetHeight&&f.focus();if(p!=e.showingFrom||c!=e.showingTo||e.lastSizeC!=e.wrapper.clientHeight)e.lastSizeC=e.wrapper.clientHeight,q(a,400);e.showingFrom=p;e.showingTo=c;ne(a);ka(a);return!0}ka(a)}}function ne(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=a.lineDiv.firstChild,d;c;c=c.nextSibling)if(c.lineObj){if($a){var e=
c.offsetTop+c.offsetHeight;d=e-b;b=e}else d=M(c),d=d.bottom-d.top;e=c.lineObj.height-d;2>d&&(d=ab(a));if(.001<e||-.001>e)if(qa(c.lineObj,d),d=c.lineObj.widgets)for(e=0;e<d.length;++e)d[e].height=d[e].node.offsetHeight}}function ka(a){var b=a.display.viewOffset=zb(a,y(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function me(a,b){for(var c=0,d=b.length||0;c<d;++c){for(var e=b[c],h=[],k=e.diff||0,u=0,p=a.length;u<p;++u){var l=a[u];e.to<=l.from&&e.diff?h.push({from:l.from+k,to:l.to+
k}):e.to<=l.from||e.from>=l.to?h.push(l):(e.from>l.from&&h.push({from:l.from,to:e.from}),e.to<l.to&&h.push({from:e.to+k,to:l.to+k}))}a=h}return a}function la(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,h=0;e;e=e.nextSibling,++h)c[a.options.gutters[h]]=e.offsetLeft,d[a.options.gutters[h]]=e.offsetWidth;return{fixedPos:sa(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function ta(a,b,c,d,e){function h(b){var c=b.nextSibling;ha&&db&&
a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):b.parentNode.removeChild(b);return c}var k=la(a),u=a.display,p=a.options.lineNumbers;d.length||ha&&a.display.currentWheelTarget||$b(u.lineDiv);var l=u.lineDiv,g=l.firstChild,f=d.shift(),m=b;for(a.doc.iter(b,c,function(b){f&&f.to==m&&(f=d.shift());if(Qa(a.doc,b)){if(0!=b.height&&qa(b,0),b.widgets&&g.previousSibling)for(var c=0;c<b.widgets.length;++c){var u=b.widgets[c];if(u.showIfHidden){var Q=g.previousSibling;if(/pre/i.test(Q.nodeName)){var q=
z("div",null,null,"position: relative");Q.parentNode.replaceChild(q,Q);q.appendChild(Q);Q=q}q=Q.appendChild(z("div",[u.node],"CodeMirror-linewidget"));u.handleMouseEvents||(q.ignoreEvents=!0);I(u,q,Q,k)}}}else if(f&&f.from<=m&&f.to>m){for(;g.lineObj!=b;)g=h(g);p&&e<=m&&g.lineNumber&&rd(g.lineNumber,xb(a.options,m));g=g.nextSibling}else{if(b.widgets){q=0;for(var K=g;K&&20>q;++q,K=K.nextSibling)if(K.lineObj==b&&/div/i.test(K.nodeName)){c=K;break}}var n=m;K=c;q=Kc(a,b);var aa=b.gutterMarkers,H=a.display;
if(a.options.lineNumbers||aa||b.bgClass||b.wrapClass||b.widgets){if(K){K.alignable=null;for(var t=!0,r=0,v=null,Ka=K.firstChild,w;Ka;Ka=w)if(w=Ka.nextSibling,/\bCodeMirror-linewidget\b/.test(Ka.className)){for(var x=0;x<b.widgets.length;++x){var y=b.widgets[x];if(y.node==Ka.firstChild){y.above||v||(v=Ka);I(y,Ka,K,k);++r;break}}if(x==b.widgets.length){t=!1;break}}else K.removeChild(Ka);K.insertBefore(q,v);t&&r==b.widgets.length&&(u=K,K.className=b.wrapClass||"")}u||(u=z("div",null,b.wrapClass,"position: relative"),
u.appendChild(q));b.bgClass&&u.insertBefore(z("div",null,b.bgClass+" CodeMirror-linebackground"),u.firstChild);if(a.options.lineNumbers||aa)if(Q=u.insertBefore(z("div",null,null,"position: absolute; left: "+(a.options.fixedGutter?k.fixedPos:-k.gutterTotalWidth)+"px"),u.firstChild),a.options.fixedGutter&&(u.alignable||(u.alignable=[])).push(Q),!a.options.lineNumbers||aa&&aa["CodeMirror-linenumbers"]||(u.lineNumber=Q.appendChild(z("div",xb(a.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt",
"left: "+k.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+H.lineNumInnerWidth+"px"))),aa)for(x=0;x<a.options.gutters.length;++x)y=a.options.gutters[x],(n=aa.hasOwnProperty(y)&&aa[y])&&Q.appendChild(z("div",[n],"CodeMirror-gutter-elt","left: "+k.gutterLeft[y]+"px; width: "+k.gutterWidth[y]+"px"));$a&&(u.style.zIndex=2);if(b.widgets&&u!=K)for(x=0,K=b.widgets;x<K.length;++x)y=K[x],aa=z("div",[y.node],"CodeMirror-linewidget"),y.handleMouseEvents||(aa.ignoreEvents=!0),I(y,aa,u,k),y.above?u.insertBefore(aa,
a.options.lineNumbers&&0!=b.height?Q:q):u.appendChild(aa),Z(y,"redraw")}else u=q;if(u!=c)l.insertBefore(u,g);else{for(;g!=c;)g=h(g);g=g.nextSibling}u.lineObj=b}++m});g;)g=h(g)}function I(a,b,c,d){a.noHScroll&&((c.alignable||(c.alignable=[])).push(b),c=d.wrapperWidth,b.style.left=d.fixedPos+"px",a.coverGutter||(c-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=c+"px");a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+
"px"))}function wa(a){var b=a.display,c=J(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting){var d=a.display,e=xa(a,a.doc.sel.head,"div");d.cursor.style.left=e.left+"px";d.cursor.style.top=e.top+"px";d.cursor.style.height=Math.max(0,e.bottom-e.top)*a.options.cursorHeight+"px";d.cursor.style.display="";e.other?(d.otherCursor.style.display="",d.otherCursor.style.left=e.other.left+"px",d.otherCursor.style.top=e.other.top+"px",d.otherCursor.style.height=.85*(e.other.bottom-e.other.top)+
"px"):d.otherCursor.style.display="none"}else b.cursor.style.display=b.otherCursor.style.display="none";c?b.selectionDiv.style.display="none":m(a);a.options.moveInputWithCursor&&(a=xa(a,a.doc.sel.head,"div"),c=M(b.wrapper),d=M(b.lineDiv),b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+d.top-c.top))+"px",b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+d.left-c.left))+"px")}function m(a){function b(a,b,c,d){0>b&&(b=0);k.appendChild(z("div",null,"CodeMirror-selected",
"position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?u-a:c)+"px; height: "+(d-b)+"px"))}function c(c,d,h){var k=y(e,c),l=k.text.length,g,f;oe(ya(k),d||0,null==h?l:h,function(e,Q,m){var q=T(a,w(c,e),"div",k,"left"),K;if(e==Q){var n=q;m=K=q.left}else n=T(a,w(c,Q-1),"div",k,"right"),"rtl"==m&&(m=q,q=n,n=m),m=q.left,K=n.right;null==d&&0==e&&(m=p);3<n.top-q.top&&(b(m,q.top,null,q.bottom),m=p,q.bottom<n.top&&b(m,q.bottom,null,n.top));null==h&&Q==l&&(K=u);if(!g||q.top<g.top||q.top==g.top&&
q.left<g.left)g=q;if(!f||n.bottom>f.bottom||n.bottom==f.bottom&&n.right>f.right)f=n;m<p+1&&(m=p);b(m,n.top,K-m,n.bottom)});return{start:g,end:f}}var d=a.display,e=a.doc,h=a.doc.sel,k=document.createDocumentFragment(),u=d.lineSpace.offsetWidth,p=za(a.display.measure,z("pre",null,null,"text-align: left")).appendChild(z("span","x")).offsetLeft;if(h.from.line==h.to.line)c(h.from.line,h.from.ch,h.to.ch);else{var l=y(e,h.from.line),g=y(e,h.to.line);g=Da(e,l)==Da(e,g);l=c(h.from.line,h.from.ch,g?l.text.length:
null).end;h=c(h.to.line,g?0:null,h.to.ch).start;g&&(l.top<h.top-2?(b(l.right,l.top,null,l.bottom),b(p,h.top,h.left,h.bottom)):b(l.right,l.top,h.left-l.right,l.bottom));l.bottom<h.top&&b(p,l.bottom,null,h.top)}za(d.selectionDiv,k);d.selectionDiv.style.display=""}function g(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="";b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?
"":"hidden"},a.options.cursorBlinkRate)}}function q(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.showingTo&&a.state.highlight.set(b,pa(H,a))}function H(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.showingTo)){var c=+new Date+a.options.workTime,d=eb(b.mode,Ab(a,b.frontier)),e=[],h;b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(k){if(b.frontier>=a.display.showingFrom){var u=k.styles;k.styles=sd(a,k,d);for(var p=!u||u.length!=
k.styles.length,l=0;!p&&l<u.length;++l)p=u[l]!=k.styles[l];p&&(h&&h.end==b.frontier?h.end++:e.push(h={start:b.frontier,end:b.frontier+1}));k.stateAfter=eb(b.mode,d)}else td(a,k,d),k.stateAfter=0==b.frontier%5?eb(b.mode,d):null;++b.frontier;if(+new Date>c)return q(a,a.options.workDelay),!0});e.length&&D(a,function(){for(var a=0;a<e.length;++a)O(this,e[a].start,e[a].end)})()}}function ba(a,b,c){var d=a.doc,e=b;for(b-=100;e>b;--e){if(e<=d.first)return d.first;var h=y(d,e-1);if(h.stateAfter&&(!c||e<=
d.frontier))return e;h=fb(h.text,null,a.options.tabSize);if(null==k||u>h){var k=e-1;var u=h}}return k}function Ab(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var h=ba(a,b,c),k=h>d.first&&y(d,h-1).stateAfter;k=k?eb(d.mode,k):ud(d.mode);d.iter(h,b,function(c){td(a,c,k);c.stateAfter=h==b-1||0==h%5||h>=e.showingFrom&&h<e.showingTo?eb(d.mode,k):null;++h});return k}function Lc(a,b,c,d,e){var h=-1;d=d||X(a,b);for(a=c;!(b=d[a]);a+=h)0>h&&0==a&&(h=1);e=a>c?"left":a<c?"right":e;"left"==e&&
b.leftSide?b=b.leftSide:"right"==e&&b.rightSide&&(b=b.rightSide);return{left:a<c?b.right:b.left,right:a>c?b.left:b.right,top:b.top,bottom:b.bottom}}function da(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.bgClass+"|"+b.wrapClass)return e}}function Ba(a,b){var c=da(a,b);c&&(c.text=c.measure=c.markedSpans=null)}function X(a,b){var c=da(a,b);if(c)return c.measure;
c=Ia(a,b);var d=a.display.measureLineCache,e={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:c,classes:b.textClass+"|"+b.bgClass+"|"+b.wrapClass};16==d.length?d[++a.display.measureLineCachePos%16]=e:d.push(e);return c}function Ia(a,b){function c(a){var b=a.top-q.top,c=a.bottom-q.top;c>H&&(c=H);0>b&&(b=0);for(var d=n.length-2;0<=d;d-=2){var e=n[d],h=n[d+1];if(!(e>c||h<b)&&(e<=b&&h>=c||b<=e&&c>=h||Math.min(c,h)-Math.max(b,e)>=c-b>>1)){n[d]=Math.min(b,e);n[d+1]=Math.max(c,
h);break}}0>d&&(d=n.length,n.push(b,c));return{left:a.left-q.left,right:a.right-q.left,top:d,bottom:null}}function d(a){a.bottom=n[a.top+1];a.top=n[a.top]}var e=a.display,h=vd(b.text.length),k=Kc(a,b,h,!0);if(N&&!$a&&!a.options.lineWrapping&&100<k.childNodes.length){for(var u=document.createDocumentFragment(),p=k.childNodes.length,l=0,g=Math.ceil(p/10);l<g;++l){for(var f=z("div",null,null,"display: inline-block"),m=0;10>m&&p;++m)f.appendChild(k.firstChild),--p;u.appendChild(f)}k.appendChild(u)}za(e.measure,
k);var q=M(e.lineDiv),n=[];u=vd(b.text.length);var H=k.offsetHeight;ma&&e.measure.first!=k&&za(e.measure,k);for(l=0;l<h.length;++l)if(e=h[l])k=e,p=null,/\bCodeMirror-widget\b/.test(e.className)&&e.getClientRects&&(1==e.firstChild.nodeType&&(k=e.firstChild),g=k.getClientRects(),1<g.length&&(p=u[l]=c(g[0]),p.rightSide=c(g[g.length-1]))),p||(p=u[l]=c(M(k))),e.measureRight&&(p.right=M(e.measureRight).left),e.leftSide&&(p.leftSide=c(M(e.leftSide)));for(l=0;l<u.length;++l)if(e=u[l])d(e),e.leftSide&&d(e.leftSide),
e.rightSide&&d(e.rightSide);return u}function bb(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0;a.display.cachedCharWidth=a.display.cachedTextHeight=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function ea(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var h=bc(b.widgets[e]);c.top+=h;c.bottom+=h}if("line"==d)return c;d||(d="local");b=zb(a,b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;
if("page"==d||"window"==d)a=M(a.display.lineSpace),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function Y(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):
"local"!=c&&c||(c=M(a.display.sizer),d+=c.left,b+=c.top);a=M(a.display.lineSpace);return{left:d-a.left,top:b-a.top}}function T(a,b,c,d,e){d||(d=y(a.doc,b.line));return ea(a,d,Lc(a,d,b.ch,null,e),c)}function xa(a,b,c,d,e){function h(b,h){var k=Lc(a,d,b,e,h?"right":"left");h?k.left=k.right:k.right=k.left;return ea(a,d,k,c)}function k(a,b){var c=u[b],d=c.level%2;a==Mc(c)&&b&&c.level<u[b-1].level?(c=u[--b],a=Nc(c)-(c.level%2?0:1),d=!0):a==Nc(c)&&b<u.length-1&&c.level<u[b+1].level&&(c=u[++b],a=Mc(c)-c.level%
2,d=!1);return d&&a==c.to&&a>c.from?h(a-1):h(a,d)}d=d||y(a.doc,b.line);e||(e=X(a,d));var u=ya(d);b=b.ch;if(!u)return h(b);var p=Oc(u,b);p=k(b,p);null!=gb&&(p.other=k(b,gb));return p}function cc(a,b,c,d){a=new w(a,b);a.xRel=d;c&&(a.outside=!0);return a}function W(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return cc(d.first,0,!0,-1);var e=wb(d,c),h=d.first+d.size-1;if(e>h)return cc(d.first+d.size-1,y(d,h).text.length,!0,1);for(0>b&&(b=0);;){h=y(d,e);e=rb(a,h,e,b,c);var k=(h=ac(h))&&h.find();
if(h&&(e.ch>k.from.ch||e.ch==k.from.ch&&0<e.xRel))e=k.to.line;else return e}}function rb(a,b,c,d,e){function h(d){d=xa(a,w(c,d),"line",b,g);u=!0;if(k>d.bottom)return d.left-p;if(k<d.top)return d.left+p;u=!1;return d.left}var k=e-zb(a,b),u=!1,p=2*a.display.wrapper.clientWidth,g=X(a,b),f=ya(b),m=b.text.length;e=dc(b);var q=ec(b),n=h(e),H=u,t=h(q),r=u;if(d>t)return cc(c,q,r,1);for(;;){if(f?q==e||q==Pc(b,e,1):1>=q-e){f=d<n||d-n<=t-d?e:q;for(d-=f==e?n:t;Qc.test(b.text.charAt(f));)++f;return cc(c,f,f==
e?H:r,0>d?-1:d?1:0)}var v=Math.ceil(m/2),x=e+v;if(f){x=e;for(var y=0;y<v;++y)x=Pc(b,x,1)}y=h(x);if(y>d){q=x;t=y;if(r=u)t+=1E3;m=v}else e=x,n=y,H=u,m-=v}}function ab(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Sa){Sa=z("pre");for(var b=0;49>b;++b)Sa.appendChild(document.createTextNode("x")),Sa.appendChild(z("br"));Sa.appendChild(document.createTextNode("x"))}za(a.measure,Sa);b=Sa.offsetHeight/50;3<b&&(a.cachedTextHeight=b);$b(a.measure);return b||1}function Ha(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;
var b=z("span","x"),c=z("pre",[b]);za(a.measure,c);b=b.offsetWidth;2<b&&(a.cachedCharWidth=b);return b||10}function hb(a){a.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++pe};fc++||(La=[])}function ib(a){var b=a.curOp,c=a.doc,d=a.display;a.curOp=null;b.updateMaxLine&&Hc(a);if(d.maxLineChanged&&!a.options.lineWrapping&&d.maxLine){var e=d.maxLine;var h=!1;if(e.markedSpans)for(var k=
0;k<e.markedSpans;++k){var u=e.markedSpans[k];!u.collapsed||null!=u.to&&u.to!=e.text.length||(h=!0)}(h=!h&&da(a,e))?e=Lc(a,e,e.text.length,h.measure,"right").right:(e=Kc(a,e,null,!0),h=e.appendChild(Bb(a.display.measure)),za(a.display.measure,e),e=M(h).right-M(a.display.lineDiv).left);d.sizer.style.minWidth=Math.max(0,e+3+Za)+"px";d.maxLineChanged=!1;e=Math.max(0,d.sizer.offsetLeft+d.sizer.offsetWidth-d.scroller.clientWidth);e<c.scrollLeft&&!b.updateScrollPos&&jb(a,Math.min(d.scroller.scrollLeft,
e),!0)}if(b.updateScrollPos)var p=b.updateScrollPos;else b.selectionChanged&&d.scroller.clientHeight&&(p=xa(a,c.sel.head),p=gc(a,p.left,p.top,p.left,p.bottom));if(b.changes.length||b.forceUpdate||p&&null!=p.scrollTop){var l=Ra(a,b.changes,p&&p.scrollTop,b.forceUpdate);a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop)}!l&&b.selectionChanged&&wa(a);if(b.updateScrollPos)d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=p.scrollTop,d.scroller.scrollLeft=d.scrollbarH.scrollLeft=
c.scrollLeft=p.scrollLeft,ra(a),b.scrollToPos&&wd(a,C(a.doc,b.scrollToPos),b.scrollToPosMargin);else if(p&&(c=wd(a,a.doc.sel.head,a.options.cursorScrollMargin),a.state.focused&&(d=a.display,p=M(d.sizer),l=null,0>c.top+p.top?l=!0:c.bottom+p.top>(window.innerHeight||document.documentElement.clientHeight)&&(l=!1),null!=l&&!qe))){if(p="none"==d.cursor.style.display)d.cursor.style.display="",d.cursor.style.left=c.left+"px",d.cursor.style.top=c.top-d.viewOffset+"px";d.cursor.scrollIntoView(l);p&&(d.cursor.style.display=
"none")}b.selectionChanged&&g(a);a.state.focused&&b.updateInput&&Ja(a,b.userSelChange);c=b.maybeHiddenMarkers;d=b.maybeUnhiddenMarkers;if(c)for(l=0;l<c.length;++l)c[l].lines.length||R(c[l],"hide");if(d)for(l=0;l<d.length;++l)d[l].lines.length&&R(d[l],"unhide");if(!--fc){var f=La;La=null}b.textChanged&&R(a,"change",a,b.textChanged);b.cursorActivity&&R(a,"cursorActivity",a);if(f)for(l=0;l<f.length;++l)f[l]()}function D(a,b){return function(){var c=a||this,d=!c.curOp;d&&hb(c);try{var e=b.apply(c,arguments)}finally{d&&
ib(c)}return e}}function Cb(a){return function(){var b=this.cm&&!this.cm.curOp;b&&hb(this.cm);try{var c=a.apply(this,arguments)}finally{b&&ib(this.cm)}return c}}function na(a,b){var c=!a.curOp;c&&hb(a);try{var d=b()}finally{c&&ib(a)}return d}function O(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);a.curOp.changes.push({from:b,to:c,diff:d})}function hc(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){Rc(a);a.state.focused&&hc(a)})}function Db(a){function b(){Rc(a)||
c?(a.display.pollingFast=!1,hc(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0;a.display.poll.set(20,b)}function Rc(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||re(b)||Eb(a)||a.state.disableInput)return!1;var h=b.value;if(h==c&&J(e.from,e.to))return!1;if(N&&!ma&&a.display.inputHasSelection===h)return Ja(a,!0),!1;var k=!a.curOp;k&&hb(a);e.shift=!1;for(var u=0,p=Math.min(c.length,h.length);u<p&&c.charCodeAt(u)==h.charCodeAt(u);)++u;p=e.from;
e=e.to;u<c.length?p=w(p.line,p.ch-(c.length-u)):a.state.overwrite&&J(p,e)&&!a.state.pasteIncoming&&(e=w(e.line,Math.min(y(d,e.line).text.length,e.ch+(h.length-u))));c=a.curOp.updateInput;u={from:p,to:e,text:Ta(h.slice(u)),origin:a.state.pasteIncoming?"paste":"+input"};kb(a.doc,u,"end");a.curOp.updateInput=c;Z(a,"inputRead",a,u);1E3<h.length||-1<h.indexOf("\n")?b.value=a.display.prevInput="":a.display.prevInput=h;k&&ib(a);a.state.pasteIncoming=!1;return!0}function Ja(a,b){var c,d=a.doc;if(J(d.sel.from,
d.sel.to))b&&(a.display.prevInput=a.display.input.value="",N&&!ma&&(a.display.inputHasSelection=null));else{a.display.prevInput="";var e=(c=xd&&(100<d.sel.to.line-d.sel.from.line||1E3<(e=a.getSelection()).length))?"-":e||a.getSelection();a.display.input.value=e;a.state.focused&&yd(a.display.input);N&&!ma&&(a.display.inputHasSelection=e)}a.display.inaccurateSelection=c}function fa(a){"nocursor"==a.options.readOnly||Cc&&document.activeElement==a.display.input||a.display.input.focus()}function Eb(a){return a.options.readOnly||
a.doc.cantEdit}function Xb(a){function b(){a.state.focused&&setTimeout(pa(fa,a),0)}function c(){null==u&&(u=setTimeout(function(){u=null;k.cachedCharWidth=k.cachedTextHeight=Fb=null;bb(a);na(a,pa(O,a))},100))}function d(){for(var a=k.wrapper.parentNode;a&&a!=document.body;a=a.parentNode);a?setTimeout(d,5E3):Ea(window,"resize",c)}function e(b){Aa(a,b)||a.options.onDragEvent&&a.options.onDragEvent(a,Gb(b))||Hb(b)}function h(){k.inaccurateSelection&&(k.prevInput="",k.inaccurateSelection=!1,k.input.value=
a.getSelection(),yd(k.input))}var k=a.display;B(k.scroller,"mousedown",D(a,Yb));N?B(k.scroller,"dblclick",D(a,function(b){if(!Aa(a,b)){var c=Ib(a,b);!c||qb(a,b)||Ua(a.display,b)||(P(b),b=Sc(y(a.doc,c.line).text,c),S(a.doc,b.from,b.to))}})):B(k.scroller,"dblclick",function(b){Aa(a,b)||P(b)});B(k.lineSpace,"selectstart",function(a){Ua(k,a)||P(a)});Tc||B(k.scroller,"contextmenu",function(b){zd(a,b)});B(k.scroller,"scroll",function(){k.scroller.clientHeight&&(Jb(a,k.scroller.scrollTop),jb(a,k.scroller.scrollLeft,
!0),R(a,"scroll",a))});B(k.scrollbarV,"scroll",function(){k.scroller.clientHeight&&Jb(a,k.scrollbarV.scrollTop)});B(k.scrollbarH,"scroll",function(){k.scroller.clientHeight&&jb(a,k.scrollbarH.scrollLeft)});B(k.scroller,"mousewheel",function(b){sb(a,b)});B(k.scroller,"DOMMouseScroll",function(b){sb(a,b)});B(k.scrollbarH,"mousedown",b);B(k.scrollbarV,"mousedown",b);B(k.wrapper,"scroll",function(){k.wrapper.scrollTop=k.wrapper.scrollLeft=0});var u;B(window,"resize",c);setTimeout(d,5E3);B(k.input,"keyup",
D(a,function(b){Aa(a,b)||a.options.onKeyEvent&&a.options.onKeyEvent(a,Gb(b))||16!=b.keyCode||(a.doc.sel.shift=!1)}));B(k.input,"input",pa(Db,a));B(k.input,"keydown",D(a,Ad));B(k.input,"keypress",D(a,md));B(k.input,"focus",pa(Pa,a));B(k.input,"blur",pa(Ec,a));a.options.dragDrop&&(B(k.scroller,"dragstart",function(b){if(N&&(!a.state.draggingText||100>+new Date-Bd))Hb(b);else if(!Aa(a,b)&&!Ua(a.display,b)){var c=a.getSelection();b.dataTransfer.setData("Text",c);b.dataTransfer.setDragImage&&!Uc&&(c=z("img",
null,null,"position: fixed; left: 0; top: 0;"),ua&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop),b.dataTransfer.setDragImage(c,0,0),ua&&c.parentNode.removeChild(c))}}),B(k.scroller,"dragenter",e),B(k.scroller,"dragover",e),B(k.scroller,"drop",D(a,Zb)));B(k.scroller,"paste",function(b){Ua(k,b)||(fa(a),Db(a))});B(k.input,"paste",function(){a.state.pasteIncoming=!0;Db(a)});B(k.input,"cut",h);B(k.input,"copy",h);Gc&&B(k.sizer,"mouseup",function(){document.activeElement==k.input&&
k.input.blur();fa(a)})}function Ua(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function Ib(a,b,c){var d=a.display;if(!c&&(c=b.target||b.srcElement,c==d.scrollbarH||c==d.scrollbarH.firstChild||c==d.scrollbarV||c==d.scrollbarV.firstChild||c==d.scrollbarFiller||c==d.gutterFiller))return null;d=M(d.lineSpace);try{var e=b.clientX;var h=b.clientY}catch(k){return null}return W(a,e-d.left,h-d.top)}function Yb(a){function b(a){if(!J(H,
a))if(H=a,"single"==f)S(e.doc,C(k,g),a);else if(q=C(k,q),n=C(k,n),"double"==f){var b=Sc(y(k,a.line).text,a);L(a,q)?S(e.doc,b.from,n):S(e.doc,q,b.to)}else"triple"==f&&(L(a,q)?S(e.doc,n,C(k,w(a.line,0))):S(e.doc,q,C(k,w(a.line+1,0))))}function c(a){var d=++r,g=Ib(e,a,!0);if(g)if(J(g,m)){var u=a.clientY<t.top?-20:a.clientY>t.bottom?20:0;u&&setTimeout(D(e,function(){r==d&&(h.scroller.scrollTop+=u,c(a))}),50)}else{e.state.focused||Pa(e);m=g;b(g);var l=Jc(h,k);(g.line>=l.to||g.line<l.from)&&setTimeout(D(e,
function(){r==d&&c(a)}),150)}}function d(a){r=Infinity;P(a);fa(e);Ea(document,"mousemove",x);Ea(document,"mouseup",v)}if(!Aa(this,a)){var e=this,h=e.display,k=e.doc,u=k.sel;u.shift=a.shiftKey;if(Ua(h,a))ha||(h.scroller.draggable=!1,setTimeout(function(){h.scroller.draggable=!0},100));else if(!qb(e,a)){var g=Ib(e,a);switch(Cd(a)){case 3:Tc&&zd.call(e,e,a);return;case 2:g&&S(e.doc,g);setTimeout(pa(fa,e),20);P(a);return}if(g){e.state.focused||Pa(e);var l=+new Date,f="single";ic&&ic.time>l-400&&J(ic.pos,
g)?(f="triple",P(a),setTimeout(pa(fa,e),20),se(e,g.line)):jc&&jc.time>l-400&&J(jc.pos,g)?(f="double",ic={time:l,pos:g},P(a),l=Sc(y(k,g.line).text,g),S(e.doc,l.from,l.to)):jc={time:l,pos:g};var m=g;if(!e.options.dragDrop||!te||Eb(e)||J(u.from,u.to)||L(g,u.from)||L(u.to,g)||"single"!=f){P(a);"single"==f&&S(e.doc,C(k,g));var q=u.from,n=u.to,H=g,t=M(h.wrapper),r=0,x=D(e,function(a){N||Cd(a)?c(a):d(a)}),v=D(e,d);B(document,"mousemove",x);B(document,"mouseup",v)}else{var z=D(e,function(b){ha&&(h.scroller.draggable=
!1);e.state.draggingText=!1;Ea(document,"mouseup",z);Ea(h.scroller,"drop",z);10>Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)&&(P(b),S(e.doc,g),fa(e))});ha&&(h.scroller.draggable=!0);e.state.draggingText=z;h.scroller.dragDrop&&h.scroller.dragDrop();B(document,"mouseup",z);B(h.scroller,"drop",z)}}else(a.target||a.srcElement)==h.scroller&&P(a)}}}function qb(a,b){var c=a.display;try{var d=b.clientX,e=b.clientY}catch(u){return!1}if(d>=Math.floor(M(c.gutters).right))return!1;P(b);if(!Fa(a,
"gutterClick"))return!0;var h=M(c.lineDiv);if(e>h.bottom)return!0;e-=h.top-c.viewOffset;for(h=0;h<a.options.gutters.length;++h){var k=c.gutters.childNodes[h];if(k&&M(k).right>=d){c=wb(a.doc,e);Z(a,"gutterClick",a,c,a.options.gutters[h],b);break}}return!0}function Zb(a){var b=this;if(!(Aa(b,a)||Ua(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,Gb(a)))){P(a);N&&(Bd=+new Date);var c=Ib(b,a,!0),d=a.dataTransfer.files;if(c&&!Eb(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,
h=Array(e),k=0;a=function(a,d){var g=new FileReader;g.onload=function(){h[d]=g.result;++k==e&&(c=C(b.doc,c),kb(b.doc,{from:c,to:c,text:Ta(h.join("\n")),origin:"paste"},"around"))};g.readAsText(a)};for(var g=0;g<e;++g)a(d[g],g)}else if(!b.state.draggingText||L(c,b.doc.sel.from)||L(b.doc.sel.to,c))try{if(h=a.dataTransfer.getData("Text")){g=b.doc.sel.from;var p=b.doc.sel.to;Ma(b.doc,c,c);b.state.draggingText&&Na(b.doc,"",g,p,"paste");b.replaceSelection(h,null,"paste");fa(b);Pa(b)}}catch(l){}else b.state.draggingText(a),
setTimeout(pa(fa,b),20)}}function Jb(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,lb||Ra(a,[],b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),lb&&Ra(a,[]),q(a,100))}function jb(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,ra(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=
b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function sb(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,h=e.scroller;if(c&&h.scrollWidth>h.clientWidth||d&&h.scrollHeight>h.clientHeight){if(d&&db&&ha)for(var k=b.target;k!=h;k=k.parentNode)if(k.lineObj){a.display.currentWheelTarget=k;break}if(!c||lb||ua||null==va){if(d&&null!=
va){k=d*va;var g=a.doc.scrollTop,p=g+e.wrapper.clientHeight;0>k?g=Math.max(0,g+k-50):p=Math.min(a.doc.height,p+k+50);Ra(a,[],{top:g,bottom:p})}20>kc&&(null==e.wheelStartX?(e.wheelStartX=h.scrollLeft,e.wheelStartY=h.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=h.scrollLeft-e.wheelStartX,b=h.scrollTop-e.wheelStartY;a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(va=(va*kc+a)/(kc+1),++kc)}},200)):(e.wheelDX+=c,e.wheelDY+=
d))}else d&&Jb(a,Math.max(0,Math.min(h.scrollTop+d*va,h.scrollHeight-h.clientHeight))),jb(a,Math.max(0,Math.min(h.scrollLeft+c*va,h.scrollWidth-h.clientWidth))),P(b),e.wheelStartX=null}}function lc(a,b,c){if("string"==typeof b&&(b=Vc[b],!b))return!1;a.display.pollingFast&&Rc(a)&&(a.display.pollingFast=!1);var d=a.doc,e=d.sel.shift,h=!1;try{Eb(a)&&(a.state.suppressEdits=!0),c&&(d.sel.shift=!1),h=b(a)!=Dd}finally{d.sel.shift=e,a.state.suppressEdits=!1}return h}function tb(a){var b=a.state.keyMaps.slice(0);
a.options.extraKeys&&b.push(a.options.extraKeys);b.push(a.options.keyMap);return b}function Wb(a,b){var c=Wc(a.options.keyMap),d=c.auto;clearTimeout(Ed);d&&!Fd(b)&&(Ed=setTimeout(function(){Wc(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,x(a))},50));var e=Gd(b,!0),h=!1;if(!e)return!1;h=tb(a);if(h=b.shiftKey?Kb("Shift-"+e,h,function(b){return lc(a,b,!0)})||Kb(e,h,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return lc(a,b)}):Kb(e,h,function(b){return lc(a,b)}))P(b),
g(a),ma&&(b.oldKeyCode=b.keyCode,b.keyCode=0),Z(a,"keyHandled",a,e,b);return h}function zc(a,b,c){var d=Kb("'"+c+"'",tb(a),function(b){return lc(a,b,!0)});d&&(P(b),g(a),Z(a,"keyHandled",a,"'"+c+"'",b));return d}function Ad(a){this.state.focused||Pa(this);N&&27==a.keyCode&&(a.returnValue=!1);if(!(Aa(this,a)||this.options.onKeyEvent&&this.options.onKeyEvent(this,Gb(a)))){var b=a.keyCode;this.doc.sel.shift=16==b||a.shiftKey;var c=Wb(this,a);ua&&(Xc=c?b:null,!c&&88==b&&!xd&&(db?a.metaKey:a.ctrlKey)&&
this.replaceSelection(""))}}function md(a){var b=this;if(!(Aa(b,a)||b.options.onKeyEvent&&b.options.onKeyEvent(b,Gb(a)))){var c=a.keyCode,d=a.charCode;ua&&c==Xc?(Xc=null,P(a)):(ua&&(!a.which||10>a.which)||Gc)&&Wb(b,a)||(c=String.fromCharCode(null==d?c:d),this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!Eb(this)&&-1<this.doc.mode.electricChars.indexOf(c)&&setTimeout(D(b,function(){mc(b,b.doc.sel.to.line,"smart")}),75),zc(b,a,c)||(N&&!ma&&(b.display.inputHasSelection=
null),Db(b)))}}function Pa(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(R(a,"focus",a),a.state.focused=!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),Ja(a,!0)),hc(a),g(a))}function Ec(a){a.state.focused&&(R(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-focused",""));clearInterval(a.display.blinker);setTimeout(function(){a.state.focused||(a.doc.sel.shift=
!1)},150)}function zd(a,b){function c(){if(null!=e.input.selectionStart){var a=e.input.value=" "+(J(h.from,h.to)?"":e.input.value);e.prevInput=" ";e.input.selectionStart=1;e.input.selectionEnd=a.length}}function d(){e.inputDiv.style.position="relative";e.input.style.cssText=p;ma&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=g);hc(a);if(null!=e.input.selectionStart){N&&!ma||c();clearTimeout(Yc);var b=0,d=function(){" "==e.prevInput&&0==e.input.selectionStart?D(a,Vc.selectAll)(a):10>b++?Yc=setTimeout(d,
500):Ja(a)};Yc=setTimeout(d,200)}}if(!Aa(a,b,"contextmenu")){var e=a.display,h=a.doc.sel;if(!Ua(e,b)){var k=Ib(a,b),g=e.scroller.scrollTop;if(k&&!ua){(J(h.from,h.to)||L(k,h.from)||!L(k,h.to))&&D(a,Ma)(a.doc,k,k);var p=e.input.style.cssText;e.inputDiv.style.position="absolute";e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);";
fa(a);Ja(a,!0);J(h.from,h.to)&&(e.input.value=e.prevInput=" ");N&&!ma&&c();if(Tc){Hb(b);var l=function(){Ea(window,"mouseup",l);setTimeout(d,20)};B(window,"mouseup",l)}else setTimeout(d,50)}}}}function Hd(a,b,c){if(!L(b.from,c))return C(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>b.to.line+d)return b=c.line-d,d=a.first+a.size-1,b>d?w(d,y(a,d).text.length):nc(c,y(a,b).text.length);if(c.line==b.to.line+d)return nc(c,V(b.text).length+(1==b.text.length?b.from.ch:0)+y(a,b.to.line).text.length-
b.to.ch);a=c.line-b.from.line;return nc(c,b.text[a].length+(a?0:b.from.ch))}function Zc(a,b,c){if(c&&"object"==typeof c)return{anchor:Hd(a,b,c.anchor),head:Hd(a,b,c.head)};if("start"==c)return{anchor:b.from,head:b.from};var d=$c(b);if("around"==c)return{anchor:b.from,head:d};if("end"==c)return{anchor:d,head:d};c=function(a){if(L(a,b.from))return a;if(!L(b.to,a))return d;var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;a.line==b.to.line&&(e+=d.ch-b.to.ch);return w(c,e)};return{anchor:c(a.sel.anchor),
head:c(a.sel.head)}}function Id(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};c&&(b.update=function(b,c,h,k){b&&(this.from=C(a,b));c&&(this.to=C(a,c));h&&(this.text=h);void 0!==k&&(this.origin=k)});R(a,"beforeChange",a,b);a.cm&&R(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function kb(a,b,c,d){if(a.cm){if(!a.cm.curOp)return D(a.cm,kb)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(Fa(a,
"beforeChange")||a.cm&&Fa(a.cm,"beforeChange"))if(b=Id(a,b,!0),!b)return;if(d=Jd&&!d&&ue(a,b.from,b.to)){for(var e=d.length-1;1<=e;--e)ad(a,{from:d[e].from,to:d[e].to,text:[""]});d.length&&ad(a,{from:d[0].from,to:d[0].to,text:b.text},c)}else ad(a,b,c)}function ad(a,b,c){c=Zc(a,b,c);Kd(a,b,c,a.cm?a.cm.curOp.id:NaN);Lb(a,b,c,bd(a,b));var d=[];mb(a,function(a,c){c||-1!=Ga(d,a.history)||(Ld(a.history,b),d.push(a.history));Lb(a,b,null,bd(a,b))})}function Md(a,b){if(!a.cm||!a.cm.state.suppressEdits){var c=
a.history,d=("undo"==b?c.done:c.undone).pop();if(d){var e={changes:[],anchorBefore:d.anchorAfter,headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore,generation:c.generation};("undo"==b?c.undone:c.done).push(e);c.generation=d.generation||++c.maxGeneration;for(var h=Fa(a,"beforeChange")||a.cm&&Fa(a.cm,"beforeChange"),k=d.changes.length-1;0<=k;--k){var g=d.changes[k];g.origin=b;if(h&&!Id(a,g,!1)){("undo"==b?c.done:c.undone).length=0;break}e.changes.push(cd(a,g));var p=k?Zc(a,g,null):
{anchor:d.anchorBefore,head:d.headBefore};Lb(a,g,p,Nd(a,g));var l=[];mb(a,function(a,b){b||-1!=Ga(l,a.history)||(Ld(a.history,g),l.push(a.history));Lb(a,g,null,Nd(a,g))})}}}}function Od(a,b){function c(a){return w(a.line+b,a.ch)}a.first+=b;a.cm&&O(a.cm,a.first,a.first,b);a.sel.head=c(a.sel.head);a.sel.anchor=c(a.sel.anchor);a.sel.from=c(a.sel.from);a.sel.to=c(a.sel.to)}function Lb(a,b,c,d){if(a.cm&&!a.cm.curOp)return D(a.cm,Lb)(a,b,c,d);if(b.to.line<a.first)Od(a,b.text.length-1-(b.to.line-b.from.line));
else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Od(a,e);b={from:w(a.first,0),to:w(b.to.line+e,b.to.ch),text:[V(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:w(e,y(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=dd(a,b.from,b.to);c||(c=Zc(a,b,null));a.cm?nd(a.cm,b,d,c):ed(a,b,d,c)}}function nd(a,b,c,d){var e=a.doc,h=a.display,k=b.from,g=b.to,p=!1,l=k.line;a.options.lineWrapping||(l=ja(Da(e,y(e,k.line))),
e.iter(l,g.line+1,function(a){if(a==h.maxLine)return p=!0}));L(e.sel.head,b.from)||L(b.to,e.sel.head)||(a.curOp.cursorActivity=!0);ed(e,b,c,d,v(a));a.options.lineWrapping||(e.iter(l,k.line+b.text.length,function(a){var b=F(e,a);b>h.maxLineLength&&(h.maxLine=a,h.maxLineLength=b,h.maxLineChanged=!0,p=!1)}),p&&(a.curOp.updateMaxLine=!0));e.frontier=Math.min(e.frontier,k.line);q(a,400);O(a,k.line,g.line+1,b.text.length-(g.line-k.line)-1);if(Fa(a,"change"))if(b={from:k,to:g,text:b.text,removed:b.removed,
origin:b.origin},a.curOp.textChanged){for(a=a.curOp.textChanged;a.next;a=a.next);a.next=b}else a.curOp.textChanged=b}function Na(a,b,c,d,e){d||(d=c);if(L(d,c)){var h=d;d=c;c=h}"string"==typeof b&&(b=Ta(b));kb(a,{from:c,to:d,text:b,origin:e},null)}function w(a,b){if(!(this instanceof w))return new w(a,b);this.line=a;this.ch=b}function J(a,b){return a.line==b.line&&a.ch==b.ch}function L(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function Va(a){return w(a.line,a.ch)}function C(a,b){if(b.line<
a.first)return w(a.first,0);var c=a.first+a.size-1;return b.line>c?w(c,y(a,c).text.length):nc(b,y(a,b.line).text.length)}function nc(a,b){var c=a.ch;return null==c||c>b?w(a.line,b):0>c?w(a.line,0):a}function nb(a,b){return b>=a.first&&b<a.first+a.size}function S(a,b,c,d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var h=L(b,e);h!=L(c,e)?(e=b,b=c):h!=L(b,c)&&(b=c)}Ma(a,e,b,d)}else Ma(a,b,c||b,d);a.cm&&(a.cm.curOp.userSelChange=!0)}function Ma(a,b,c,d,e){if(!e&&Fa(a,"beforeSelectionChange")||
a.cm&&Fa(a.cm,"beforeSelectionChange"))b={anchor:b,head:c},R(a,"beforeSelectionChange",a,b),a.cm&&R(a.cm,"beforeSelectionChange",a.cm,b),b.anchor=C(a,b.anchor),b.head=C(a,b.head),c=b.head,b=b.anchor;var h=a.sel;h.goalColumn=null;if(e||!J(b,h.anchor))b=oc(a,b,d,"push"!=e);if(e||!J(c,h.head))c=oc(a,c,d,"push"!=e);J(h.anchor,b)&&J(h.head,c)||(h.anchor=b,h.head=c,d=L(c,b),h.from=d?c:b,h.to=d?b:c,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=!0),Z(a,"cursorActivity",
a))}function Pd(a){Ma(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function oc(a,b,c,d){var e=!1,h=b,k=c||1;a.cantEdit=!1;a:for(;;){var g=y(a,h.line);if(g.markedSpans)for(var p=0;p<g.markedSpans.length;++p){var l=g.markedSpans[p],f=l.marker;if((null==l.from||(f.inclusiveLeft?l.from<=h.ch:l.from<h.ch))&&(null==l.to||(f.inclusiveRight?l.to>=h.ch:l.to>h.ch))){if(d&&(R(f,"beforeCursorEnter"),f.explicitlyCleared))if(g.markedSpans){--p;continue}else break;if(f.atomic){p=f.find()[0>k?"from":"to"];if(J(p,
h)&&(p.ch+=k,0>p.ch?p=p.line>a.first?C(a,w(p.line-1)):null:p.ch>g.text.length&&(p=p.line<a.first+a.size-1?w(p.line+1,0):null),!p)){if(e){if(!d)return oc(a,b,c,!0);a.cantEdit=!0;return w(a.first,0)}e=!0;p=b;k=-k}h=p;continue a}}}return h}}function wd(a,b,c){for(null==c&&(c=0);;){var d=!1,e=xa(a,b),h=gc(a,e.left,e.top-c,e.left,e.bottom+c),k=a.doc.scrollTop,g=a.doc.scrollLeft;null!=h.scrollTop&&(Jb(a,h.scrollTop),1<Math.abs(a.doc.scrollTop-k)&&(d=!0));null!=h.scrollLeft&&(jb(a,h.scrollLeft),1<Math.abs(a.doc.scrollLeft-
g)&&(d=!0));if(!d)return e}}function gc(a,b,c,d,e){var h=a.display,k=ab(a.display);0>c&&(c=0);var g=h.scroller.clientHeight-Za,p=h.scroller.scrollTop,l={};a=a.doc.height+(h.mover.offsetHeight-h.lineSpace.offsetHeight);c<p?l.scrollTop=c<k?0:c:e>p+g&&(c=Math.min(c,(e>a-k?a:e)-g),c!=p&&(l.scrollTop=c));p=h.scroller.clientWidth-Za;c=h.scroller.scrollLeft;b+=h.gutters.offsetWidth;d+=h.gutters.offsetWidth;h=h.gutters.offsetWidth;e=b<h+10;b<c+h||e?(e&&(b=0),l.scrollLeft=Math.max(0,b-10-h)):d>p+c-3&&(l.scrollLeft=
d+10-p);return l}function pc(a,b,c){a.curOp.updateScrollPos={scrollLeft:null==b?a.doc.scrollLeft:b,scrollTop:null==c?a.doc.scrollTop:c}}function fd(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos={scrollLeft:a.doc.scrollLeft,scrollTop:a.doc.scrollTop});a=a.display.scroller;d.scrollTop=Math.max(0,Math.min(a.scrollHeight-a.clientHeight,d.scrollTop+c));d.scrollLeft=Math.max(0,Math.min(a.scrollWidth-a.clientWidth,d.scrollLeft+b))}function mc(a,b,c,d){var e=a.doc;null==c&&(c="add");if("smart"==
c)if(a.doc.mode.indent)var h=Ab(a,b);else c="prev";var k=a.options.tabSize,g=y(e,b),p=fb(g.text,null,k),l=g.text.match(/^\s*/)[0];if("smart"==c){var f=a.doc.mode.indent(h,g.text.slice(l.length),g.text);if(f==Dd){if(!d)return;c="prev"}}"prev"==c?f=b>e.first?fb(y(e,b-1).text,null,k):0:"add"==c?f=p+a.options.indentUnit:"subtract"==c?f=p-a.options.indentUnit:"number"==typeof c&&(f=p+c);f=Math.max(0,f);c="";d=0;if(a.options.indentWithTabs)for(e=Math.floor(f/k);e;--e)d+=k,c+="\t";d<f&&(c+=Qd(f-d));c!=l&&
Na(a.doc,c,w(b,0),w(b,l.length),"+input");g.stateAfter=null}function qc(a,b,c){var d=b,e=b,h=a.doc;"number"==typeof b?e=y(h,Math.max(h.first,Math.min(b,h.first+h.size-1))):d=ja(b);if(null!=d&&c(e,d))O(a,d,d+1);else return null;return e}function gd(a,b,c,d,e){function h(b){var d=(e?Pc:Rd)(f,g,c,!0);if(null==d){if(b=!b)b=k+c,b<a.first||b>=a.first+a.size?b=l=!1:(k=b,b=f=y(a,b));if(b)g=e?(0>c?ec:dc)(f):0>c?f.text.length:0;else return l=!1}else g=d;return!0}var k=b.line,g=b.ch;b=c;var f=y(a,k),l=!0;if("char"==
d)h();else if("column"==d)h(!0);else if("word"==d||"group"==d){var m=null;d="group"==d;for(var q=!0;!(0>c)||h(!q);q=!1){var n=f.text.charAt(g)||"\n";n=Mb(n)?"w":d?/\s/.test(n)?null:"p":null;if(m&&m!=n){0>c&&(c=1,h());break}n&&(m=n);if(0<c&&!h(!q))break}}b=oc(a,w(k,g),b,!0);l||(b.hitSide=!0);return b}function Sd(a,b,c,d){var e=a.doc,h=b.left,k;for("page"==d?k=b.top+c*(Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-(0>c?1.5:.5)*ab(a.display)):"line"==
d&&(k=0<c?b.bottom+3:b.top-3);;){b=W(a,h,k);if(!b.outside)break;if(0>c?0>=k:k>=e.height){b.hitSide=!0;break}k+=5*c}return b}function Sc(a,b){var c=b.ch,d=b.ch;if(a){(0>b.xRel||d==a.length)&&c?--c:++d;var e=a.charAt(c);for(e=Mb(e)?Mb:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Mb(a)};0<c&&e(a.charAt(c-1));)--c;for(;d<a.length&&e(a.charAt(d));)++d}return{from:w(b.line,c),to:w(b.line,d)}}function se(a,b){S(a.doc,w(b,0),C(a.doc,w(b+1,0)))}function E(a,b,c,d){f.defaults[a]=
b;c&&(Ya[a]=d?function(a,b,d){d!=qd&&c(a,b,d)}:c)}function eb(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c}function ud(a,b,c){return a.startState?a.startState(b,c):!0}function Wc(a){return"string"==typeof a?Ca[a]:a}function Kb(a,b,c){function d(b){b=Wc(b);var e=b[a];if(!1===e)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=
Object.prototype.toString.call(b))return d(b);e=0;for(var h=b.length;e<h;++e){var k=d(b[e]);if(k)return k}return!1}for(var e=0;e<b.length;++e){var h=d(b[e]);if(h)return"stop"!=h}}function Fd(a){a=Wa[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a}function Gd(a,b){if(ua&&34==a.keyCode&&a["char"])return!1;var c=Wa[a.keyCode];if(null==c||a.altGraphKey)return!1;a.altKey&&(c="Alt-"+c);if(Td?a.metaKey:a.ctrlKey)c="Ctrl-"+c;if(Td?a.ctrlKey:a.metaKey)c="Cmd-"+c;!b&&a.shiftKey&&(c="Shift-"+c);return c}
function Nb(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lastColumnPos=this.lastColumnValue=0}function Oa(a,b){this.lines=[];this.type=b;this.doc=a}function Ob(a,b,c,d,e){if(d&&d.shared)return ve(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return D(a.cm,Ob)(a,b,c,d,e);var h=new Oa(a,e);if("range"==e&&!L(b,c))return h;d&&rc(d,h);h.replacedWith&&(h.collapsed=!0,h.replacedWith=z("span",[h.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(h.replacedWith.ignoreEvents=!0));h.collapsed&&(yb=
!0);h.addToHistory&&Kd(a,{from:b,to:c,origin:"markText"},{head:a.sel.head,anchor:a.sel.anchor},NaN);var k=b.line,g=0,f,l,m=a.cm,q;a.iter(k,c.line+1,function(d){m&&h.collapsed&&!m.options.lineWrapping&&Da(a,d)==m.display.maxLine&&(q=!0);var e={from:null,to:null,marker:h};g+=d.text.length;k==b.line&&(e.from=b.ch,g-=b.ch);k==c.line&&(e.to=c.ch,g-=d.text.length-c.ch);h.collapsed&&(k==c.line&&(l=cb(d,c.ch)),k==b.line?f=cb(d,b.ch):qa(d,0));d.markedSpans=d.markedSpans?d.markedSpans.concat([e]):[e];e.marker.attachLine(d);
++k});h.collapsed&&a.iter(b.line,c.line+1,function(b){Qa(a,b)&&qa(b,0)});h.clearOnEnter&&B(h,"beforeCursorEnter",function(){h.clear()});h.readOnly&&(Jd=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());if(h.collapsed){if(f!=l)throw Error("Inserting collapsed marker overlapping an existing one");h.size=g;h.atomic=!0}m&&(q&&(m.curOp.updateMaxLine=!0),(h.className||h.title||h.startStyle||h.endStyle||h.collapsed)&&O(m,b.line,c.line+1),h.atomic&&Pd(m));return h}function Pb(a,b){this.markers=
a;this.primary=b;for(var c=0,d=this;c<a.length;++c)a[c].parent=this,B(a[c],"clear",function(){d.clear()})}function ve(a,b,c,d,e){d=rc(d);d.shared=!1;var h=[Ob(a,b,c,d,e)],k=h[0],g=d.replacedWith;mb(a,function(a){g&&(d.replacedWith=g.cloneNode(!0));h.push(Ob(a,C(a,b),C(a,c),d,e));for(var f=0;f<a.linked.length;++f)if(a.linked[f].isParent)return;k=V(h)});return new Pb(h,k)}function Qb(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function bd(a,b){var c=nb(a,b.from.line)&&
y(a,b.from.line).markedSpans,d=nb(a,b.to.line)&&y(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,h=b.to.ch,k=J(b.from,b.to);if(c)for(var g=0,f;g<c.length;++g){var l=c[g],m=l.marker;if(null==l.from||(m.inclusiveLeft?l.from<=e:l.from<e)||!("bookmark"!=m.type||l.from!=e||k&&l.marker.insertLeft)){var q=null==l.to||(m.inclusiveRight?l.to>=e:l.to>e);(f||(f=[])).push({from:l.from,to:q?null:l.to,marker:m})}}c=f;if(d){g=0;for(var n;g<d.length;++g)if(f=d[g],l=f.marker,null==f.to||(l.inclusiveRight?
f.to>=h:f.to>h)||"bookmark"==l.type&&f.from==h&&(!k||f.marker.insertLeft))m=null==f.from||(l.inclusiveLeft?f.from<=h:f.from<h),(n||(n=[])).push({from:m?null:f.from-h,to:null==f.to?null:f.to-h,marker:l})}d=n;k=1==b.text.length;n=V(b.text).length+(k?e:0);if(c)for(h=0;h<c.length;++h)if(g=c[h],null==g.to)(f=Qb(d,g.marker),f)?k&&(g.to=null==f.to?null:f.to+n):g.to=e;if(d)for(h=0;h<d.length;++h)g=d[h],null!=g.to&&(g.to+=n),null==g.from?(f=Qb(c,g.marker),f||(g.from=n,k&&(c||(c=[])).push(g))):(g.from+=n,k&&
(c||(c=[])).push(g));if(k&&c){for(h=0;h<c.length;++h)null!=c[h].from&&c[h].from==c[h].to&&"bookmark"!=c[h].marker.type&&c.splice(h--,1);c.length||(c=null)}e=[c];if(!k){k=b.text.length-2;var H;if(0<k&&c)for(h=0;h<c.length;++h)null==c[h].to&&(H||(H=[])).push({from:null,to:null,marker:c[h].marker});for(h=0;h<k;++h)e.push(H);e.push(d)}return e}function Nd(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(we(c[d]));c=e}else c=null;d=bd(a,b);if(!c)return d;if(!d)return c;for(e=
0;e<c.length;++e){var h=c[e],g=d[e];if(h&&g){var f=0;a:for(;f<g.length;++f){for(var p=g[f],l=0;l<h.length;++l)if(h[l].marker==p.marker)continue a;h.push(p)}}else g&&(c[e]=g)}return c}function ue(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Ga(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(),h=0;h<a.length;++h){var g=a[h];
if(!L(g.to,e.from)&&!L(e.to,g.from)){var f=[h,1];(L(g.from,e.from)||!c.inclusiveLeft&&J(g.from,e.from))&&f.push({from:g.from,to:e.from});(L(e.to,g.to)||!c.inclusiveRight&&J(g.to,e.to))&&f.push({from:e.to,to:g.to});a.splice.apply(a,f);h+=f.length-1}}}return a}function cb(a,b){var c=yb&&a.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||d.from<b)&&(null==d.to||d.to>b)&&(!h||h.width<d.marker.width))var h=d.marker;return h}function ac(a){return cb(a,a.text.length+
1)}function Da(a,b){for(var c;c=cb(b,-1);)b=y(a,c.find().from.line);return b}function Qa(a,b){var c=yb&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.replacedWith&&0==d.from&&d.marker.inclusiveLeft&&hd(a,b,d)))return!0}function hd(a,b,c){if(null==c.to)return b=c.marker.find().to,b=y(a,b.line),hd(a,b,Qb(b.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],
d.marker.collapsed&&!d.marker.replacedWith&&d.from==c.to&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&hd(a,b,d))return!0}function Ud(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Vd(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Wd(a){return function(){var b=!this.cm.curOp;b&&hb(this.cm);try{var c=a.apply(this,arguments)}finally{b&&ib(this.cm)}return c}}function bc(a){if(null!=a.height)return a.height;
a.node.parentNode&&1==a.node.parentNode.nodeType||za(a.cm.display.measure,z("div",[a.node],null,"position: relative"));return a.height=a.node.offsetHeight}function xe(a,b,c,d){var e=new sc(a,c,d);e.noHScroll&&(a.display.alignWidgets=!0);qc(a,b,function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;if(!Qa(a.doc,b)||e.showIfHidden)c=zb(a,b)<a.doc.scrollTop,qa(b,b.height+bc(e)),c&&fd(a,0,e.height);return!0});return e}
function Xd(a,b,c,d,e){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var g=0,f=null,p=new Nb(b,a.options.tabSize);for(""==b&&c.blankLine&&c.blankLine(d);!p.eol();){if(p.pos>a.options.maxHighlightLength){h=!1;p.pos=Math.min(b.length,p.start+5E4);var l=null}else l=c.token(p,d);h&&f==l||(g<p.start&&e(p.start,f),g=p.start,f=l);p.start=p.pos}g<p.pos&&e(p.pos,f)}function sd(a,b,c){var d=[a.state.modeGen];Xd(a,b.text,a.doc.mode,c,function(a,b){d.push(a,b)});for(c=0;c<a.state.overlays.length;++c){var e=
a.state.overlays[c],h=1,g=0;Xd(a,b.text,e.mode,!0,function(a,b){for(var c=h;g<a;){var k=d[h];k>a&&d.splice(h,1,a,d[h+1],k);h+=2;g=Math.min(a,k)}if(b)if(e.opaque)d.splice(c,h-c,a,b),h=c+2;else for(;c<h;c+=2)k=d[c+1],d[c+1]=k?k+" "+b:b})}return d}function Yd(a,b){b.styles&&b.styles[0]==a.state.modeGen||(b.styles=sd(a,b,b.stateAfter=Ab(a,ja(b))));return b.styles}function td(a,b,c){var d=a.doc.mode,e=new Nb(b.text,a.options.tabSize);for(""==b.text&&d.blankLine&&d.blankLine(c);!e.eol()&&e.pos<=a.options.maxHighlightLength;)d.token(e,
c),e.start=e.pos}function Zd(a){return a?$d[a]||($d[a]="cm-"+a.replace(/ +/g," cm-")):null}function Kc(a,b,c,d){for(var e,h=b,g=!0;e=cb(h,-1);)h=y(a.doc,e.find().from.line);d={pre:z("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:a,copyWidgets:d};h.textClass&&(d.pre.className=h.textClass);do{h.text&&(g=!1);d.measure=h==b&&c;d.pos=0;d.addToken=d.measure?ye:ae;(N||ha)&&a.getOption("lineWrapping")&&(d.addToken=ze(d.addToken));a:{var f=e=void 0,p=void 0,l=void 0,m=void 0,q=void 0,n=d,H=Yd(a,h),
t=h.markedSpans,r=h.text,x=0;if(t){var v=r.length,w=0;E=1;for(var C="",ba=0;;){if(ba==w){m=l=p=f="";e=null;ba=Infinity;for(var G=null,D=0;D<t.length;++D){var B=t[D],A=B.marker;B.from<=w&&(null==B.to||B.to>w)?(null!=B.to&&ba>B.to&&(ba=B.to,l=""),A.className&&(m+=" "+A.className),A.startStyle&&B.from==w&&(p+=" "+A.startStyle),A.endStyle&&B.to==ba&&(l+=" "+A.endStyle),A.title&&!f&&(f=A.title),A.collapsed&&(!e||e.marker.size<A.size)&&(e=B)):B.from>w&&ba>B.from&&(ba=B.from);"bookmark"==A.type&&B.from==
w&&A.replacedWith&&(G=A)}if(e&&(e.from||0)==w&&(be(n,(null==e.to?v:e.to)-w,e.marker,null==e.from),null==e.to)){e=e.marker.find();break a}G&&!e&&be(n,0,G)}if(w>=v)break;for(G=Math.min(v,ba);;){if(C){D=w+C.length;e||(B=D>G?C.slice(0,G-w):C,n.addToken(n,B,q?q+m:m,p,w+B.length==ba?l:"",f));if(D>=G){C=C.slice(G-w);w=G;break}w=D;p=""}C=r.slice(x,x=H[E++]);q=Zd(H[E++])}}}else for(var E=1;E<H.length;E+=2)n.addToken(n,r.slice(x,x=H[E]),Zd(H[E+1]));e=void 0}c&&h==b&&!d.measuredSomething&&(c[0]=d.pre.appendChild(Bb(a.display.measure)),
d.measuredSomething=!0);e&&(h=y(a.doc,e.to.line))}while(e);!c||d.measuredSomething||c[0]||(c[0]=d.pre.appendChild(g?z("span","\u00a0"):Bb(a.display.measure)));d.pre.firstChild||Qa(a.doc,b)||d.pre.appendChild(document.createTextNode("\u00a0"));var oa;c&&N&&(oa=ya(h))&&(g=oa.length-1,oa[g].from==oa[g].to&&--g,h=oa[g],oa=oa[g-1],h.from+1==h.to&&oa&&h.level<oa.level&&(c=c[d.pos-1])&&c.parentNode.insertBefore(c.measureRight=Bb(a.display.measure),c.nextSibling));R(a,"renderLine",a,b,d.pre);return d.pre}
function ae(a,b,c,d,e,h){if(b){if(id.test(b)){l=document.createDocumentFragment();for(var g=0;;){id.lastIndex=g;var f=id.exec(b),p=f?f.index-g:b.length-g;p&&(l.appendChild(document.createTextNode(b.slice(g,g+p))),a.col+=p);if(!f)break;g+=p+1;"\t"==f[0]?(f=a.cm.options.tabSize,f-=a.col%f,l.appendChild(z("span",Qd(f),"cm-tab")),a.col+=f):(p=z("span","\u2022","cm-invalidchar"),p.title="\\u"+f[0].charCodeAt(0).toString(16),l.appendChild(p),a.col+=1)}}else{a.col+=b.length;var l=document.createTextNode(b)}if(c||
d||e||a.measure)return b=c||"",d&&(b+=d),e&&(b+=e),p=z("span",[l],b),h&&(p.title=h),a.pre.appendChild(p);a.pre.appendChild(l)}}function ye(a,b,c,d,e){for(var h=a.cm.options.lineWrapping,g=0;g<b.length;++g){var f=b.charAt(g),p=0==g;"\ud800"<=f&&"\udbff">f&&g<b.length-1?(f=b.slice(g,g+2),++g):g&&h&&tc(b,g)&&a.pre.appendChild(z("wbr"));var l=a.measure[a.pos];p=a.measure[a.pos]=ae(a,f,c,p&&d,g==b.length-1&&e);l&&(p.leftSide=l.leftSide||l);N&&h&&" "==f&&g&&!/\s/.test(b.charAt(g-1))&&g<b.length-1&&!/\s/.test(b.charAt(g+
1))&&(p.style.whiteSpace="normal");a.pos+=f.length}b.length&&(a.measuredSomething=!0)}function ze(a){function b(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"\u00a0";return b+" "}return function(c,d,e,h,g,f){return a(c,d.replace(/ {3,}/,b),e,h,g,f)}}function be(a,b,c,d){if(d=!d&&c.replacedWith)if(a.copyWidgets&&(d=d.cloneNode(!0)),a.pre.appendChild(d),a.measure){if(b)a.measure[a.pos]=d;else{var e=a.measure[a.pos]=Bb(a.cm.display.measure);"bookmark"!=c.type||c.insertLeft?a.pre.insertBefore(e,d):
a.pre.appendChild(e)}a.measuredSomething=!0}a.pos+=b}function ed(a,b,c,d,e){function h(a,c,d){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);Ud(a);Vd(a,d);c=e?e(a):1;c!=a.height&&qa(a,c);Z(a,"change",a,b)}var g=b.from,f=b.to,p=b.text,l=y(a,g.line),m=y(a,f.line),q=V(p),n=c?c[p.length-1]:null,H=f.line-g.line;if(0==g.ch&&0==f.ch&&""==q){for(var t=0,r=p.length-1,x=[];t<r;++t)x.push(new ob(p[t],c?c[t]:null,e));h(m,m.text,n);H&&a.remove(g.line,H);x.length&&
a.insert(g.line,x)}else if(l==m)if(1==p.length)h(l,l.text.slice(0,g.ch)+q+l.text.slice(f.ch),n);else{x=[];t=1;for(r=p.length-1;t<r;++t)x.push(new ob(p[t],c?c[t]:null,e));x.push(new ob(q+l.text.slice(f.ch),n,e));h(l,l.text.slice(0,g.ch)+p[0],c?c[0]:null);a.insert(g.line+1,x)}else if(1==p.length)h(l,l.text.slice(0,g.ch)+p[0]+m.text.slice(f.ch),c?c[0]:null),a.remove(g.line+1,H);else{h(l,l.text.slice(0,g.ch)+p[0],c?c[0]:null);h(m,q+m.text.slice(f.ch),n);t=1;r=p.length-1;for(x=[];t<r;++t)x.push(new ob(p[t],
c?c[t]:null,e));1<H&&a.remove(g.line+1,H-1);a.insert(g.line+1,x)}Z(a,"change",a,b);Ma(a,d.anchor,d.head,null,!0)}function uc(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function Rb(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var h=a[d];b+=h.chunkSize();c+=h.height;h.parent=this}this.size=b;this.height=c;this.parent=null}function mb(a,b,c){function d(a,h,g){if(a.linked)for(var e=0;e<a.linked.length;++e){var f=a.linked[e];
if(f.doc!=h){var k=g&&f.sharedHist;if(!c||k)b(f.doc,k),d(f.doc,a,k)}}}d(a,null,!0)}function pd(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;r(a);t(a);a.options.lineWrapping||Hc(a);a.options.mode=b.modeOption;O(a)}function y(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function dd(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&
(a=a.slice(b.ch));d.push(a);++e});return d}function jd(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function qa(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function ja(a){if(null==a.parent)return null;var b=a.parent;a=Ga(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function wb(a,b){var c=a.first;a:do{for(var d=0,e=a.children.length;d<e;++d){var h=a.children[d],g=h.height;if(b<g){a=h;continue a}b-=
g;c+=h.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<e;++d){h=a.lines[d].height;if(b<h)break;b-=h}return c+d}function zb(a,b){b=Da(a.doc,b);for(var c=0,d=b.parent,e=0;e<d.lines.length;++e){var h=d.lines[e];if(h==b)break;else c+=h.height}for(h=d.parent;h;d=h,h=d.parent)for(e=0;e<h.children.length;++e){var g=h.children[e];if(g==d)break;else c+=g.height}return c}function ya(a){var b=a.order;null==b&&(b=a.order=Ae(a.text));return b}function vc(a){return{done:[],undone:[],undoDepth:Infinity,
lastTime:0,lastOp:null,lastOrigin:null,generation:a||1,maxGeneration:a||1}}function ce(a,b,c,d){var e=b["spans_"+a.id],h=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[h]=c.markedSpans);++h})}function cd(a,b){var c={from:{line:b.from.line,ch:b.from.ch},to:$c(b),text:dd(a,b.from,b.to)};ce(a,c,b.from.line,b.to.line+1);mb(a,function(a){ce(a,c,b.from.line,b.to.line+1)},!0);return c}function Kd(a,b,c,d){var e=a.history;e.undone.length=0;
var h=+new Date,g=V(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastTime>h-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))){var f=V(g.changes);J(b.from,b.to)&&J(b.from,f.to)?f.to=$c(b):g.changes.push(cd(a,b));g.anchorAfter=c.anchor;g.headAfter=c.head}else for(g={changes:[cd(a,b)],generation:e.generation,anchorBefore:a.sel.anchor,headBefore:a.sel.head,anchorAfter:c.anchor,headAfter:c.head},e.done.push(g),e.generation=++e.maxGeneration;e.done.length>
e.undoDepth;)e.done.shift();e.lastTime=h;e.lastOp=d;e.lastOrigin=b.origin}function we(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function wc(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],h=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,headAfter:e.headAfter});for(e=0;e<h.length;++e){var f=h[e],m;g.push({from:f.from,to:f.to,text:f.text});
if(b)for(var l in f)(m=l.match(/^spans_(\d+)$/))&&-1<Ga(b,Number(m[1]))&&(V(g)[l]=f[l],delete f[l])}}return d}function xc(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function de(a,b,c,d){for(var e=0;e<a.length;++e){for(var h=a[e],g=!0,f=0;f<h.changes.length;++f){var m=h.changes[f];h.copied||(m.from=Va(m.from),m.to=Va(m.to));if(c<m.from.line)m.from.line+=d,m.to.line+=d;else if(b<=m.to.line){g=!1;break}}h.copied||(h.anchorBefore=Va(h.anchorBefore),h.headBefore=Va(h.headBefore),h.anchorAfter=
Va(h.anchorAfter),h.readAfter=Va(h.headAfter),h.copied=!0);g?(xc(h.anchorBefore),xc(h.headBefore),xc(h.anchorAfter),xc(h.headAfter)):(a.splice(0,e+1),e=0)}}function Ld(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;de(a.done,c,d,e);de(a.undone,c,d,e)}function Be(){Hb(this)}function Gb(a){a.stop||(a.stop=Be);return a}function P(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function ee(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Hb(a){P(a);ee(a)}function Cd(a){var b=
a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));db&&a.ctrlKey&&1==b&&(b=3);return b}function B(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))}function Ea(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}}function R(a,b){var c=
a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function Z(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);La||(++fc,La=[],setTimeout(Ce,0));for(var h=0;h<d.length;++h)La.push(c(d[h]))}}function Aa(a,b,c){R(a,c||b.type,a,b);return(null!=b.defaultPrevented?b.defaultPrevented:0==b.returnValue)||b.codemirrorIgnore}function Ce(){--fc;var a=
La;La=null;for(var b=0;b<a.length;++b)a[b]()}function Fa(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function pb(a){a.prototype.on=function(a,c){B(this,a,c)};a.prototype.off=function(a,c){Ea(this,a,c)}}function Dc(){this.id=null}function fb(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function Qd(a){for(;yc.length<=a;)yc.push(V(yc)+" ");return yc[a]}function V(a){return a[a.length-1]}function yd(a){if(ub)a.selectionStart=
0,a.selectionEnd=a.value.length;else try{a.select()}catch(b){}}function Ga(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function fe(a,b){function c(){}c.prototype=a;var d=new c;b&&rc(b,d);return d}function rc(a,b){b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function vd(a){for(var b=[],c=0;c<a;++c)b.push(void 0);return b}function pa(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}
function Mb(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||De.test(a))}function ge(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function z(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)rd(a,b);else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function $b(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function za(a,b){return $b(a).appendChild(b)}function rd(a,
b){ma?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function M(a){return a.getBoundingClientRect()}function tc(){return!1}function vb(a){if(null!=Fb)return Fb;var b=z("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");za(a,b);b.offsetWidth&&(Fb=b.offsetHeight-b.clientHeight);return Fb||0}function Bb(a){if(null==kd){var b=z("span","\u200b");za(a,z("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(kd=1>=b.offsetWidth&&2<b.offsetHeight&&
!$a)}return kd?z("span","\u200b"):z("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}function oe(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,h=0;h<a.length;++h){var g=a[h];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function Mc(a){return a.level%2?a.to:a.from}function Nc(a){return a.level%2?a.from:a.to}function dc(a){return(a=ya(a))?Mc(a[0]):0}function ec(a){var b=ya(a);return b?Nc(V(b)):a.text.length}
function he(a,b){var c=y(a.doc,b),d=Da(a.doc,c);d!=c&&(b=ja(d));d=(c=ya(d))?c[0].level%2?ec(d):dc(d):0;return w(b,d)}function Ee(a,b){for(var c,d;c=ac(d=y(a.doc,b));)b=c.find().to.line;d=(c=ya(d))?c[0].level%2?dc(d):ec(d):d.text.length;return w(b,d)}function Oc(a,b){for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return gb=null,c;if(e.from==b||e.to==b)if(null==d)d=c;else{e=e.level;var h=a[d].level,g=a[0].level;e=e==g?!0:h==g?!1:e<h;if(e)return gb=d,c;gb=c;return d}}gb=null;return d}function ld(a,
b,c,d){if(!d)return b+c;do b+=c;while(0<b&&Qc.test(a.text.charAt(b)));return b}function Pc(a,b,c,d){var e=ya(a);if(!e)return Rd(a,b,c,d);var h=Oc(e,b),g=e[h];for(b=ld(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(Oc(e,b)==h)return b;g=e[h+c];return 0<c==g.level%2?g.to:g.from}g=e[h+=c];if(!g)return null;b=0<c==g.level%2?ld(a,g.to,-1,d):ld(a,g.from,1,d)}}function Rd(a,b,c,d){b+=c;if(d)for(;0<b&&Qc.test(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var lb=
/gecko\/\d/i.test(navigator.userAgent),N=/MSIE \d/.test(navigator.userAgent),$a=N&&(null==document.documentMode||8>document.documentMode),ma=N&&(null==document.documentMode||9>document.documentMode),ha=/WebKit\//.test(navigator.userAgent),Fe=ha&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Ge=/Chrome\//.test(navigator.userAgent),ua=/Opera\//.test(navigator.userAgent),Uc=/Apple Computer/.test(navigator.vendor),Gc=/KHTML\//.test(navigator.userAgent),je=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),
ke=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),qe=/PhantomJS/.test(navigator.userAgent),ub=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Cc=ub||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),db=ub||/Mac/.test(navigator.platform),He=/windows/i.test(navigator.platform),Xa=ua&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Xa&&(Xa=Number(Xa[1]));Xa&&15<=Xa&&(ua=!1,ha=!0);var Td=db&&(Fe||ua&&(null==Xa||12.11>Xa)),
Tc=lb||N&&!ma,Jd=!1,yb=!1,Sa,pe=0,jc,ic,Bd=0,kc=0,va=null;N?va=-.53:lb?va=15:Ge?va=-.7:Uc&&(va=-1/3);var Ed,Xc=null,Yc,$c=f.changeEnd=function(a){return a.text?w(a.from.line+a.text.length-1,V(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};f.Pos=w;f.prototype={constructor:f,focus:function(){window.focus();fa(this);Pa(this);Db(this)},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,Ya.hasOwnProperty(a)&&D(this,Ya[a])(this,b,d)},getOption:function(a){return this.options[a]},
getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:D(null,function(a,b){var c=a.token?a:f.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,modeSpec:a,opaque:b&&b.opaque});this.state.modeGen++;O(this)}),removeOverlay:D(null,function(a){for(var b=
this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;O(this);break}}}),indentLine:D(null,function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");nb(this.doc,a)&&mc(this,a,b,c)}),indentSelection:D(null,function(a){var b=this.doc.sel;if(J(b.from,b.to))return mc(this,b.from.line,a);var c=b.to.line-(b.to.ch?0:1);for(b=b.from.line;b<=c;++b)mc(this,b,a)}),
getTokenAt:function(a,b){var c=this.doc;a=C(c,a);var d=Ab(this,a.line,b),e=this.doc.mode;c=y(c,a.line);for(c=new Nb(c.text,this.options.tabSize);c.pos<a.ch&&!c.eol();){c.start=c.pos;var g=e.token(c,d)}return{start:c.start,end:c.pos,string:c.current(),className:g||null,type:g||null,state:d}},getTokenTypeAt:function(a){a=C(this.doc,a);var b=Yd(this,y(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)return b[2];for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else return b[2*
e+2]}},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?f.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){if(Sb.hasOwnProperty(b)){var c=Sb[b],d=this.getModeAt(a);return d[b]&&c[d[b]]||d.helperType&&c[d.helperType]||c[d.name]}},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return Ab(this,a+1,b)},cursorCoords:function(a,b){var c=this.doc.sel;c=null==a?c.head:"object"==typeof a?C(this.doc,a):a?c.from:
c.to;return xa(this,c,b||"page")},charCoords:function(a,b){return T(this,C(this.doc,a),b||"page")},coordsChar:function(a,b){a=Y(this,a,b||"page");return W(this,a.left,a.top)},lineAtHeight:function(a,b){a=Y(this,{top:a,left:0},b||"page").top;return wb(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);d=y(this.doc,a);return ea(this,y(this.doc,a),{top:0,left:0},b||"page").top+(c?d.height:0)},defaultTextHeight:function(){return ab(this.display)},
defaultCharWidth:function(){return Ha(this.display)},setGutterMarker:D(null,function(a,b,c){return qc(this,a,function(a){var d=a.gutterMarkers||(a.gutterMarkers={});d[b]=c;!c&&ge(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:D(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,O(b,d,d+1),ge(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),addLineClass:D(null,function(a,b,c){return qc(this,a,function(a){var d="text"==
b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if((new RegExp("(?:^|\\s)"+c+"(?:$|\\s)")).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:D(null,function(a,b,c){return qc(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",g=a[d];if(g)if(null==c)a[d]=null;else{var f=g.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var m=f.index+f[0].length;a[d]=g.slice(0,f.index)+(f.index&&m!=g.length?" ":"")+g.slice(m)||null}else return!1;
return!0})}),addLineWidget:D(null,function(a,b,c){return xe(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!nb(this.doc,a))return null;var b=a;a=y(this.doc,a);if(!a)return null}else if(b=ja(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},
addWidget:function(a,b,c,d,e){var g=this.display;a=xa(this,C(this.doc,a));var f=a.bottom,m=a.left;b.style.position="absolute";g.sizer.appendChild(b);if("over"==d)f=a.top;else if("above"==d||"near"==d){var p=Math.max(g.wrapper.clientHeight,this.doc.height),l=Math.max(g.sizer.clientWidth,g.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>p)&&a.top>b.offsetHeight?f=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=p&&(f=a.bottom);m+b.offsetWidth>l&&(m=l-b.offsetWidth)}b.style.top=f+"px";b.style.left=
b.style.right="";"right"==e?(m=g.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?m=0:"middle"==e&&(m=(g.sizer.clientWidth-b.offsetWidth)/2),b.style.left=m+"px");c&&(a=gc(this,m,f,m+b.offsetWidth,f+b.offsetHeight),null!=a.scrollTop&&Jb(this,a.scrollTop),null!=a.scrollLeft&&jb(this,a.scrollLeft))},triggerOnKeyDown:D(null,Ad),execCommand:function(a){return Vc[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var g=0;for(a=C(this.doc,a);g<b&&(a=gd(this.doc,a,e,c,d),!a.hitSide);++g);
return a},moveH:D(null,function(a,b){var c=this.doc.sel;c=c.shift||c.extend||J(c.from,c.to)?gd(this.doc,c.head,a,b,this.options.rtlMoveVisually):0>a?c.from:c.to;S(this.doc,c,c,a)}),deleteH:D(null,function(a,b){var c=this.doc.sel;J(c.from,c.to)?Na(this.doc,"",c.from,gd(this.doc,c.head,a,b,!1),"+delete"):Na(this.doc,"",c.from,c.to,"+delete");this.curOp.userSelChange=!0}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var g=0;for(a=C(this.doc,a);g<b&&(a=xa(this,a,"div"),null==d?d=a.left:a.left=
d,a=Sd(this,a,e,c),!a.hitSide);++g);return a},moveV:D(null,function(a,b){var c=this.doc.sel,d=xa(this,c.head,"div");null!=c.goalColumn&&(d.left=c.goalColumn);var e=Sd(this,d,a,b);"page"==b&&fd(this,0,T(this,e,"div").top-d.top);S(this.doc,e,e,a);c.goalColumn=d.left}),toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",
"")},hasFocus:function(){return this.state.focused},scrollTo:D(null,function(a,b){pc(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller,b=Za;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:D(null,function(a,b){"number"==typeof a&&(a=w(a,0));b||(b=0);var c=a;a&&null==a.line||(this.curOp.scrollToPos=a?C(this.doc,a):this.doc.sel.head,this.curOp.scrollToPosMargin=b,c=xa(this,
this.curOp.scrollToPos));c=gc(this,c.left,c.top-b,c.right,c.bottom+b);pc(this,c.scrollLeft,c.scrollTop)}),setSize:D(null,function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a));null!=b&&(this.display.wrapper.style.height=c(b));this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0);this.curOp.forceUpdate=!0}),operation:function(a){return na(this,a)},refresh:D(null,function(){bb(this);
pc(this,this.doc.scrollLeft,this.doc.scrollTop);O(this)}),swapDoc:D(null,function(a){var b=this.doc;b.cm=null;pd(this,a);bb(this);Ja(this,!0);pc(this,a.scrollLeft,a.scrollTop);return b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};pb(f);var Ya=f.optionHandlers={},Ac=f.defaults={},qd=f.Init={toString:function(){return"CodeMirror.Init"}};
E("value","",function(a,b){a.setValue(b)},!0);E("mode",null,function(a,b){a.doc.modeOption=b;t(a)},!0);E("indentUnit",2,t,!0);E("indentWithTabs",!1);E("smartIndent",!0);E("tabSize",4,function(a){t(a);bb(a);O(a)},!0);E("electricChars",!0);E("rtlMoveVisually",!He);E("theme","default",function(a){A(a);G(a)},!0);E("keyMap","default",x);E("extraKeys",null);E("onKeyEvent",null);E("onDragEvent",null);E("lineWrapping",!1,function(a){a.options.lineWrapping?(a.display.wrapper.className+=" CodeMirror-wrap",
a.display.sizer.style.minWidth=""):(a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",""),Hc(a));r(a);O(a);bb(a);setTimeout(function(){Ic(a)},100)},!0);E("gutters",[],function(a){Bc(a.options);G(a)},!0);E("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?sa(a.display)+"px":"0";a.refresh()},!0);E("coverGutterNextToScrollbar",!1,Ic,!0);E("lineNumbers",!1,function(a){Bc(a.options);G(a)},!0);E("firstLineNumber",1,G,!0);E("lineNumberFormatter",function(a){return a},
G,!0);E("showCursorWhenSelecting",!1,wa,!0);E("readOnly",!1,function(a,b){"nocursor"==b?(Ec(a),a.display.input.blur()):b||Ja(a,!0)});E("dragDrop",!0);E("cursorBlinkRate",530);E("cursorScrollMargin",0);E("cursorHeight",1);E("workTime",100);E("workDelay",100);E("flattenSpans",!0);E("pollInterval",100);E("undoDepth",40,function(a,b){a.doc.history.undoDepth=b});E("historyEventDelay",500);E("viewportMargin",10,function(a){a.refresh()},!0);E("maxHighlightLength",1E4,function(a){t(a);a.refresh()},!0);E("moveInputWithCursor",
!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)});E("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});E("autofocus",null);var ie=f.modes={},Tb=f.mimeModes={};f.defineMode=function(a,b){f.defaults.mode||"null"==a||(f.defaults.mode=a);if(2<arguments.length){b.dependencies=[];for(var c=2;c<arguments.length;++c)b.dependencies.push(arguments[c])}ie[a]=b};f.defineMIME=function(a,b){Tb[a]=b};f.resolveMode=function(a){if("string"==typeof a&&Tb.hasOwnProperty(a))a=
Tb[a];else if(a&&"string"==typeof a.name&&Tb.hasOwnProperty(a.name)){var b=Tb[a.name];a=fe(b,a);a.name=b.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return f.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};f.getMode=function(a,b){b=f.resolveMode(b);var c=ie[b.name];if(!c)return f.getMode(a,"text/plain");c=c(a,b);if(Ub.hasOwnProperty(b.name)){var d=Ub[b.name],e;for(e in d)d.hasOwnProperty(e)&&(c.hasOwnProperty(e)&&(c["_"+e]=c[e]),c[e]=d[e])}c.name=
b.name;return c};f.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});f.defineMIME("text/plain","null");var Ub=f.modeExtensions={};f.extendMode=function(a,b){var c=Ub.hasOwnProperty(a)?Ub[a]:Ub[a]={};rc(b,c)};f.defineExtension=function(a,b){f.prototype[a]=b};f.defineDocExtension=function(a,b){U.prototype[a]=b};f.defineOption=E;var Fc=[];f.defineInitHook=function(a){Fc.push(a)};var Sb=f.helpers={};f.registerHelper=function(a,b,c){Sb.hasOwnProperty(a)||(Sb[a]=f[a]={});Sb[a][b]=
c};f.isWordChar=Mb;f.copyState=eb;f.startState=ud;f.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var Vc=f.commands={selectAll:function(a){a.setSelection(w(a.firstLine(),0),w(a.lastLine()))},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!J(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:w(b.line),"+delete"):a.replaceRange("",b,w(b.line+1,0),"+delete")},deleteLine:function(a){var b=
a.getCursor().line;a.replaceRange("",w(b,0),w(b),"+delete")},delLineLeft:function(a){var b=a.getCursor();a.replaceRange("",w(b.line,0),b,"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(w(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(w(a.lastLine()))},goLineStart:function(a){a.extendSelection(he(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=he(a,b.line),d=a.getLineHandle(c.line),e=ya(d);e&&0!=e[0].level?
a.extendSelection(c):(d=Math.max(0,d.text.search(/\S/)),a.extendSelection(w(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d)))},goLineEnd:function(a){a.extendSelection(Ee(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div"))},goLineLeft:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,
"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,
"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end","+input")},defaultTab:function(a){a.somethingSelected()?
a.indentSelection("add"):a.replaceSelection("\t","end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),w(b.line,b.ch-1),w(b.line,b.ch+1))},newlineAndIndent:function(a){D(a,function(){a.replaceSelection("\n","end","+input");a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},Ca=f.keyMap={};Ca.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",
End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};Ca.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart",
"Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};Ca.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight",
"Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]};Ca["default"]=db?Ca.macDefault:Ca.pcDefault;Ca.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown",
"Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};f.lookupKey=Kb;f.isModifierKey=Fd;f.keyName=Gd;f.fromTextArea=function(a,b){function c(){a.value=m.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);!b.placeholder&&a.placeholder&&
(b.placeholder=a.placeholder);if(null==b.autofocus){var d=document.body;try{d=document.activeElement}catch(p){}b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form&&(B(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var e=a.form,g=e.submit;try{var k=e.submit=function(){c();e.submit=g;e.submit();e.submit=k}}catch(p){}}a.style.display="none";var m=f(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);m.save=c;m.getTextArea=function(){return a};m.toTextArea=function(){c();
a.parentNode.removeChild(m.getWrapperElement());a.style.display="";a.form&&(Ea(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=g))};return m};Nb.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):
a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=fb(this.string,this.start,this.tabSize,this.lastColumnPos,
this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue},indentation:function(){return fb(this.string,null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,
this.pos)}};f.StringStream=Nb;f.TextMarker=Oa;pb(Oa);Oa.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&hb(a);if(Fa(this,"clear")){var c=this.find();c&&Z(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var g=this.lines[e],f=Qb(g.markedSpans,this);null!=f.to&&(d=ja(g));for(var m=g,p=void 0,l=g.markedSpans,q=f,n=0;n<l.length;++n)l[n]!=q&&(p||(p=[])).push(l[n]);m.markedSpans=p;null!=f.from?c=ja(g):this.collapsed&&!Qa(this.doc,g)&&a&&qa(g,
ab(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)g=Da(a.doc,this.lines[e]),f=F(a.doc,g),f>a.display.maxLineLength&&(a.display.maxLine=g,a.display.maxLineLength=f,a.display.maxLineChanged=!0);null!=c&&a&&O(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&Pd(a));b&&ib(a)}};Oa.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=Qb(d.markedSpans,this);if(null!=
e.from||null!=e.to)d=ja(d),null!=e.from&&(a=w(d,e.from)),null!=e.to&&(b=w(d,e.to))}return"bookmark"==this.type?a:a&&{from:a,to:b}};Oa.prototype.changed=function(){var a=this.find(),b=this.doc.cm;if(a&&b){var c=y(this.doc,a.from.line);Ba(b,c);if(a.from.line>=b.display.showingFrom&&a.from.line<b.display.showingTo){for(a=b.display.lineDiv.firstChild;a;a=a.nextSibling)if(a.lineObj==c){a.offsetHeight!=c.height&&qa(c,a.offsetHeight);break}na(b,function(){b.curOp.selectionChanged=b.curOp.forceUpdate=b.curOp.updateMaxLine=
!0})}}};Oa.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=Ga(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Oa.prototype.detachLine=function(a){this.lines.splice(Ga(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};f.SharedTextMarker=Pb;pb(Pb);Pb.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=
!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Z(this,"clear")}};Pb.prototype.find=function(){return this.primary.find()};var sc=f.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a;this.node=b};pb(sc);sc.prototype.clear=Wd(function(){var a=this.line.widgets,b=ja(this.line);if(null!=b&&a){for(var c=0;c<a.length;++c)a[c]==this&&a.splice(c--,1);a.length||(this.line.widgets=null);a=zb(this.cm,this.line)<this.cm.doc.scrollTop;qa(this.line,Math.max(0,
this.line.height-bc(this)));a&&fd(this.cm,0,-this.height);O(this.cm,b,b+1)}});sc.prototype.changed=Wd(function(){var a=this.height;this.height=null;if(a=bc(this)-a)qa(this.line,this.line.height+a),a=ja(this.line),O(this.cm,a,a+1)});var ob=f.Line=function(a,b,c){this.text=a;Vd(this,b);this.height=c?c(this):1};pb(ob);var $d={},id=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;uc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=
this.lines[c];this.height-=e.height;var g=e;g.parent=null;Ud(g);Z(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Rb.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=
0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var g=Math.min(b,e-a),f=d.height;d.removeInner(a,g);this.height-=f-d.height;e==g&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=g))break;a=0}else a-=e}25>this.size-b&&(c=[],this.collapse(c),this.children=[new uc(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,
e=this.children.length;d<e;++d){var g=this.children[d],f=g.chunkSize();if(a<=f){g.insertInner(a,b,c);if(g.lines&&50<g.lines.length){for(;50<g.lines.length;)a=g.lines.splice(g.lines.length-25,25),a=new uc(a),g.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5);b=new Rb(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=Ga(a.parent.children,
a);a.parent.children.splice(c+1,0,b)}else c=new Rb(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var g=this.children[d],f=g.chunkSize();if(a<f){f=Math.min(b,f-a);if(g.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var Ie=0,U=f.Doc=function(a,b,c){if(!(this instanceof U))return new U(a,b,c);null==c&&(c=0);Rb.call(this,[new uc([new ob("",null)])]);this.first=
c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.history=vc();this.cleanGeneration=1;this.frontier=c;c=w(c,0);this.sel={from:c,to:c,head:c,anchor:c,shift:!1,extend:!1,goalColumn:null};this.id=++Ie;this.modeOption=b;"string"==typeof a&&(a=Ta(a));ed(this,{from:c,to:c,text:a},null,{head:c,anchor:c})};U.prototype=fe(Rb.prototype,{constructor:U,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0,e=b.length;d<
e;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=jd(this,this.first,this.first+this.size);return!1===a?b:b.join(a||"\n")},setValue:function(a){var b=w(this.first,0),c=this.first+this.size-1;kb(this,{from:b,to:w(c,y(this,c).text.length),text:Ta(a),origin:"setValue"},{head:b,anchor:b},!0)},replaceRange:function(a,b,c,d){b=C(this,b);c=c?C(this,c):b;Na(this,a,b,c,d)},getRange:function(a,b,c){a=dd(this,C(this,a),
C(this,b));return!1===c?a:a.join(c||"\n")},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},setLine:function(a,b){nb(this,a)&&Na(this,b,w(a,0),C(this,w(a)))},removeLine:function(a){a?Na(this,"",C(this,w(a-1)),C(this,w(a))):Na(this,"",w(0,0),C(this,w(1,0)))},getLineHandle:function(a){if(nb(this,a))return y(this,a)},getLineNumber:function(a){return ja(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=y(this,a));return Da(this,a)},lineCount:function(){return this.size},firstLine:function(){return this.first},
lastLine:function(){return this.first+this.size-1},clipPos:function(a){return C(this,a)},getCursor:function(a){var b=this.sel;return Va(null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||!1===a?b.to:b.from)},somethingSelected:function(){return!J(this.sel.head,this.sel.anchor)},setCursor:Cb(function(a,b,c){a=C(this,"number"==typeof a?w(a,b||0):a);c?S(this,a):Ma(this,a,a)}),setSelection:Cb(function(a,b){Ma(this,C(this,a),C(this,b||a))}),extendSelection:Cb(function(a,b){S(this,C(this,a),b&&C(this,
b))}),getSelection:function(a){return this.getRange(this.sel.from,this.sel.to,a)},replaceSelection:function(a,b,c){kb(this,{from:this.sel.from,to:this.sel.to,text:Ta(a),origin:c},b||"around")},undo:Cb(function(){Md(this,"undo")}),redo:Cb(function(){Md(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.history=vc(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=
this.changeGeneration()},changeGeneration:function(){this.history.lastOp=this.history.lastOrigin=null;return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:wc(this.history.done),undone:wc(this.history.undone)}},setHistory:function(a){var b=this.history=vc(this.history.maxGeneration);b.done=a.done.slice(0);b.undone=a.undone.slice(0)},markText:function(a,b,c){return Ob(this,C(this,a),C(this,b),c,"range")},setBookmark:function(a,
b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft};a=C(this,a);return Ob(this,a,a,c,"bookmark")},findMarksAt:function(a){a=C(this,a);var b=[],c=y(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,
c=this.first;this.iter(function(d){d=d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return C(this,w(c,b))},indexFromPos:function(a){a=C(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new U(jd(this,this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,
shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn};a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new U(jd(this,b,c),a.mode||this.modeOption,b);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];
return b},unlinkDoc:function(a){a instanceof f&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);break}if(a.history==this.history){var c=[a.id];mb(a,function(a){c.push(a.id)},!0);a.history=vc();a.history.done=wc(this.history.done,c);a.history.undone=wc(this.history.undone,c)}},iterLinkedDocs:function(a){mb(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});U.prototype.eachLine=U.prototype.iter;
var Je=["iter","insert","remove","copy","getEditor"],Vb;for(Vb in U.prototype)U.prototype.hasOwnProperty(Vb)&&0>Ga(Je,Vb)&&(f.prototype[Vb]=function(a){return function(){return a.apply(this.doc,arguments)}}(U.prototype[Vb]));pb(U);f.e_stop=Hb;f.e_preventDefault=P;f.e_stopPropagation=ee;var La,fc=0;f.on=B;f.off=Ea;f.signal=R;var Za=30,Dd=f.Pass={toString:function(){return"CodeMirror.Pass"}};Dc.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};f.countColumn=fb;var yc=[""],
De=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Qc=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;f.replaceGetRect=function(a){M=a};var te=function(){if(ma)return!1;var a=z("div");return"draggable"in a||"dragDrop"in a}();lb?tc=function(a,b){return 36==a.charCodeAt(b-1)&&39==a.charCodeAt(b)}:Uc&&
!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?tc=function(a,b){return/\-[^ \-?]|\?[^ !'"\),.\-\/:;\?\]\}]/.test(a.slice(b-1,b+1))}:ha&&!/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)&&(tc=function(a,b){if(1<b&&45==a.charCodeAt(b-1)){if(/\w/.test(a.charAt(b-2))&&/[^\-?\.]/.test(a.charAt(b)))return!0;if(2<b&&/[\d\.,]/.test(a.charAt(b-2))&&/[\d\.,]/.test(a.charAt(b)))return!1}return/[~!#%&*)=+}\]|"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|\u2026[\w~`@#$%\^&*(_=+{[><]/.test(a.slice(b-
1,b+1))});var Fb,kd,Ta=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var g=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),f=g.indexOf("\r");-1!=f?(c.push(g.slice(0,f)),b+=f+1):(c.push(g),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};f.splitLines=Ta;var re=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&
b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},xd=function(){var a=z("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),Wa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",
187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};f.keyNames=Wa;(function(){for(var a=0;10>a;a++)Wa[a+48]=String(a);for(a=65;90>=a;a++)Wa[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Wa[a+111]=Wa[a+63235]="F"+a})();var gb,Ae=function(){function a(a){return 255>=a?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL".charAt(a):
1424<=a&&1524>=a?"R":1536<=a&&1791>=a?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr".charAt(a-1536):1792<=a&&2220>=a?"r":"L"}var b=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,c=/[stwN]/,d=/[LRr]/,e=/[Lb1n]/,g=/[1n]/;return function(h){if(!b.test(h))return!1;for(var f=h.length,m=[],l=0,k;l<
f;++l)m.push(a(h.charCodeAt(l)));l=0;for(var q="L";l<f;++l)k=m[l],"m"==k?m[l]=q:q=k;l=0;for(q="L";l<f;++l)k=m[l],"1"==k&&"r"==q?m[l]="n":d.test(k)&&(q=k,"r"==k&&(m[l]="R"));l=1;for(q=m[0];l<f-1;++l)k=m[l],"+"==k&&"1"==q&&"1"==m[l+1]?m[l]="1":","!=k||q!=m[l+1]||"1"!=q&&"n"!=q||(m[l]=q),q=k;for(l=0;l<f;++l)if(k=m[l],","==k)m[l]="N";else if("%"==k){for(q=l+1;q<f&&"%"==m[q];++q);var n=l&&"!"==m[l-1]||q<f-1&&"1"==m[q]?"1":"N";for(k=l;k<q;++k)m[k]=n;l=q-1}l=0;for(q="L";l<f;++l)k=m[l],"L"==q&&"1"==k?m[l]=
"L":d.test(k)&&(q=k);for(l=0;l<f;++l)if(c.test(m[l])){for(q=l+1;q<f&&c.test(m[q]);++q);k="L"==(q<f-1?m[q]:"L");n="L"==(l?m[l-1]:"L")||k?"L":"R";for(k=l;k<q;++k)m[k]=n;l=q-1}q=[];var t;for(l=0;l<f;)if(e.test(m[l])){k=l;for(++l;l<f&&e.test(m[l]);++l);q.push({from:k,to:l,level:0})}else{var H=l;n=q.length;for(++l;l<f&&"L"!=m[l];++l);for(k=H;k<l;)if(g.test(m[k])){H<k&&q.splice(n,0,{from:H,to:k,level:1});H=k;for(++k;k<l&&g.test(m[k]);++k);q.splice(n,0,{from:H,to:k,level:2});H=k}else++k;H<l&&q.splice(n,
0,{from:H,to:l,level:1})}1==q[0].level&&(t=h.match(/^\s+/))&&(q[0].from=t[0].length,q.unshift({from:0,to:t[0].length,level:0}));1==V(q).level&&(t=h.match(/\s+$/))&&(V(q).to-=t[0].length,q.push({from:f-t[0].length,to:f,level:0}));q[0].level!=V(q).level&&q.push({from:f,to:f,level:q[0].level});return q}}();f.version="3.15.0";return f}(),md=/^(\s*)([*+-]|(\d+)\.)([\w+(\s+\w+)]|[\s*])/,nd=/^(\s*)([*+-]|(\d+)\.)(\s*)$/,Wb=function(f){var n=f.getCursor();return f.getStateAfter(n.line).list||null};F.commands.shiftTabAndIndentContinueMarkdownList=
function(f){null!==Wb(f)?f.execCommand("insertTab"):f.execCommand("indentLess")};F.commands.tabAndIndentContinueMarkdownList=function(f){null!==Wb(f)?f.execCommand("insertTab"):f.execCommand("indentMore")};F.commands.newlineAndIndentContinueMarkdownList=function(f){var n;var t=f.getCursor();var v=f.getTokenAt(t);var r=f.getLine(t.line).match(nd);var x=f.getStateAfter(t.line).list||null;!x&&r?(f.replaceRange("",{line:t.line,ch:v.start},{line:t.line,ch:v.end}),f.execCommand("delLineLeft"),f.execCommand("newlineAndIndent")):
x&&(n=f.getLine(t.line).match(md))?(t=n[1],n=0<="*+-".indexOf(n[2])?n[2]:parseInt(n[3],10)+1+".",f.replaceSelection("\n"+t+n+" ","end")):f.execCommand("newlineAndIndent")};F.defineMode("xml",function(f,n){function t(g,f){function m(m){f.tokenize=m;return m(g,f)}var q=g.next();if("<"==q){if(g.eat("!"))return g.eat("[")?g.match("CDATA[")?m(x("atom","]]\x3e")):null:g.match("--")?m(x("comment","--\x3e")):g.match("DOCTYPE",!0,!0)?(g.eatWhile(/[\w\._\-]/),m(A(1))):null;if(g.eat("?"))return g.eatWhile(/[\w\._\-]/),
f.tokenize=x("meta","?>"),"meta";q=g.eat("/");la="";for(var n;n=g.eat(/[^\s\u00a0=<>"'\/?]/);)la+=n;if(!la)return"error";ta=q?"closeTag":"openTag";f.tokenize=v;return"tag"}if("&"==q)return(g.eat("#")?g.eat("x")?g.eatWhile(/[a-fA-F\d]/)&&g.eat(";"):g.eatWhile(/[\d]/)&&g.eat(";"):g.eatWhile(/[\w\.\-:]/)&&g.eat(";"))?"atom":"error";g.eatWhile(/[^&<]/);return null}function v(g,f){var m=g.next();if(">"==m||"/"==m&&g.eat(">"))return f.tokenize=t,ta=">"==m?"endTag":"selfcloseTag","tag";if("="==m)return ta=
"equals",null;if("<"==m)return"error";if(/['"]/.test(m))return f.tokenize=r(m),f.stringStartCol=g.column(),f.tokenize(g,f);g.eatWhile(/[^\s\u00a0=<>"']/);return"word"}function r(g){var f=function(f,m){for(;!f.eol();)if(f.next()==g){m.tokenize=v;break}return"string"};f.isInAttribute=!0;return f}function x(g,f){return function(m,q){for(;!m.eol();){if(m.match(f)){q.tokenize=t;break}m.next()}return g}}function A(g){return function(f,m){for(var q;null!=(q=f.next());){if("<"==q)return m.tokenize=A(g+1),
m.tokenize(f,m);if(">"==q)if(1==g){m.tokenize=t;break}else return m.tokenize=A(g-1),m.tokenize(f,m)}return"meta"}}function G(){for(var g=arguments.length-1;0<=g;g--)I.cc.push(arguments[g])}function F(){G.apply(null,arguments);return!0}function ia(){I.context&&(I.context=I.context.prev)}function T(g){return"openTag"==g?(I.tagName=la,I.tagStart=wa.column(),F(ra,ca(I.startOfLine))):"closeTag"==g?(g=!1,I.context?I.context.tagName!=la&&(ka.implicitlyClosed.hasOwnProperty(I.context.tagName.toLowerCase())&&
ia(),g=!I.context||I.context.tagName!=la):g=!0,g&&(m="error"),F(da(g))):F()}function ca(g){return function(f){var m=I.tagName;I.tagName=I.tagStart=null;if("selfcloseTag"==f||"endTag"==f&&ka.autoSelfClosers.hasOwnProperty(m.toLowerCase()))return X(m.toLowerCase()),F();"endTag"==f&&(X(m.toLowerCase()),f=ka.doNotIndent.hasOwnProperty(m)||I.context&&I.context.noIndent,I.context={prev:I.context,tagName:m,indent:I.indented,startOfLine:g,noIndent:f});return F()}}function da(g){return function ba(f){g&&(m=
"error");if("endTag"==f)return ia(),F();m="error";return F(ba)}}function X(g){for(var f;I.context;){f=I.context.tagName.toLowerCase();if(!ka.contextGrabbers.hasOwnProperty(f)||!ka.contextGrabbers[f].hasOwnProperty(g))break;ia()}}function ra(g){if("word"==g)return m="attribute",F(ea,ra);if("endTag"==g||"selfcloseTag"==g)return G();m="error";return F(ra)}function ea(g){if("equals"==g)return F(xb,ra);ka.allowMissing?"word"==g&&(m="attribute"):m="error";return"endTag"==g||"selfcloseTag"==g?G():F()}function xb(g){if("string"==
g)return F(sa);if("word"==g&&ka.allowUnquoted)return m="string",F();m="error";return"endTag"==g||"selfCloseTag"==g?G():F()}function sa(g){return"string"==g?F(sa):G()}var Ra=f.indentUnit,W=n.multilineTagIndentFactor||1,Y=n.multilineTagIndentPastTag||!0,ka=n.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,
td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},
tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},na=n.alignCDATA,la,ta,I,wa,m;return{startState:function(){return{tokenize:t,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(g,f){!f.tagName&&g.sol()&&(f.startOfLine=!0,f.indented=g.indentation());if(g.eatSpace())return null;m=ta=la=null;var q=f.tokenize(g,f);f.type=ta;if((q||ta)&&"comment"!=
q)for(I=f,wa=g;!(f.cc.pop()||T)(ta||q););f.startOfLine=!1;return m||q},indent:function(g,f,m){var q=g.context;if(g.tokenize.isInAttribute)return g.stringStartCol+1;if(g.tokenize!=v&&g.tokenize!=t||q&&q.noIndent)return m?m.match(/^(\s*)/)[0].length:0;if(g.tagName)return Y?g.tagStart+g.tagName.length+2:g.tagStart+Ra*W;if(na&&/<!\[CDATA\[/.test(f))return 0;q&&/^<\//.test(f)&&(q=q.prev);for(;q&&!q.startOfLine;)q=q.prev;return q?q.indent+Ra:0},electricChars:"/",blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",
configuration:n.htmlMode?"html":"xml",helperType:n.htmlMode?"html":"xml"}});F.defineMIME("text/xml","xml");F.defineMIME("application/xml","xml");F.mimeModes.hasOwnProperty("text/html")||F.defineMIME("text/html",{name:"xml",htmlMode:!0});F.defineMode("markdown",function(f,n){function t(f,g,q){g.f=g.inline=q;return q(f,g)}function v(f){f.linkTitle=!1;f.em=!1;f.strong=!1;f.strike=!1;f.quote=0;W||f.f!=x||(f.f=ia,f.block=r);f.trailingSpace=0;f.trailingSpaceNewLine=!1;f.thisLineHasContent=!1;return null}
function r(f,g){var m=!1!==g.list;!1!==g.list&&0<=g.indentationDiff?(4>g.indentationDiff&&(g.indentation-=g.indentationDiff),g.list=null):!1!==g.list&&0<g.indentation?(g.list=null,g.listDepth=Math.floor(g.indentation/4)):!1!==g.list&&(g.list=!1,g.listDepth=0);if(4<=g.indentationDiff)return g.indentation-=4,f.skipToEnd(),"comment";if(f.eatSpace())return null;if("#"===f.peek()||g.prevLineHasContent&&f.match(ta))g.header=!0;else if(f.eat(">"))for(g.indentation++,g.quote=1,f.eatSpace();f.eat(">");)f.eatSpace(),
g.quote++;else{if("["===f.peek())return t(f,g,ca);if(f.match(Ha,!0))return"hr";if((!g.prevLineHasContent||m)&&(f.match(ka,!0)||f.match(Ia,!0)))g.indentation+=4,g.list=!0,g.listDepth++,n.taskLists&&f.match(la,!1)&&(g.taskList=!0);else if(n.fencedCodeBlocks&&f.match(/^```([\w+#]*)/,!0))return g.localMode=na(RegExp.$1),g.localMode&&(g.localState=g.localMode.startState()),m=A,g.f=g.block=m,m(f,g),"comment"}return t(f,g,g.inline)}function x(f,g){var m=Y.token(f,g.htmlState);W&&"tag"===m&&"openTag"!==g.htmlState.type&&
!g.htmlState.context&&(g.f=ia,g.block=r);g.md_inside&&-1!=f.current().indexOf(">")&&(g.f=ia,g.block=r,g.htmlState.context=void 0);return m}function A(f,g){if(f.sol()&&f.match(/^```/,!0))return g.localMode=g.localState=null,g.f=ia,g.block=r,"comment";if(g.localMode)return g.localMode.token(f,g.localState);f.skipToEnd();return"comment"}function G(f){var g=[];if(f.taskOpen)return"meta";if(f.taskClosed)return"property";f.strong&&g.push("strong");f.strike&&g.push("strike");f.em&&g.push("em");f.linkText&&
g.push("link");f.code&&g.push("comment");f.header&&g.push("header");f.quote&&g.push(f.quote%2?"atom":"number");if(!1!==f.list){var m=(f.listDepth-1)%3;m?1===m?g.push("variable-3"):g.push("keyword"):g.push("variable-2")}f.trailingSpaceNewLine?g.push("trailing-space-new-line"):f.trailingSpace&&g.push("trailing-space-"+(f.trailingSpace%2?"a":"b"));return g.length?g.join(" "):null}function X(f,g){if(f.match(I,!0))return G(g)}function ia(f,g){var m=g.text(f,g);if("undefined"!==typeof m)return m;if(g.list)return g.list=
null,G(g);if(g.taskList)return"x"!==f.match(la,!0)[1]?g.taskOpen=!0:g.taskClosed=!0,g.taskList=!1,G(g);g.taskOpen=!1;g.taskClosed=!1;m=f.next();if("\\"===m)return f.next(),G(g);if(g.linkTitle){g.linkTitle=!1;var r=m;"("===m&&(r=")");r=(r+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");if(f.match(new RegExp("^\\s*(?:[^"+r+"\\\\]+|\\\\\\\\|\\\\.)"+r),!0))return"string"}if("`"===m){r=G(g);m=f.pos;f.eatWhile("`");m=1+f.pos-m;if(!g.code)Ba=m,g.code=!0;else if(m===Ba)return g.code=!1,r;return G(g)}if(g.code)return G(g);
if("!"===m&&f.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return f.match(/\[[^\]]*\]/),g.inline=g.f=T,"tag";if("["===m&&f.match(/.*\](\(| ?\[)/,!1))return g.linkText=!0,G(g);if("]"===m&&g.linkText)return m=G(g),g.linkText=!1,g.inline=g.f=T,m;if("<"===m&&f.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)||"<"===m&&f.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return t(f,g,ra("link",">"));if("<"===m&&f.match(/^\w/,!1))return-1!=f.string.indexOf(">")&&(m=f.string.substring(1,f.string.indexOf(">")),/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(m)&&
(g.md_inside=!0)),f.backUp(1),m=x,g.f=g.block=m,m(f,g);if("<"===m&&f.match(/^\/\w*?>/))return g.md_inside=!1,"tag";var v=!1;!n.underscoresBreakWords&&"_"===m&&"_"!==f.peek()&&f.match(/(\w)/,!1)&&(r=f.pos-2,0<=r&&(r=f.string.charAt(r),"_"!==r&&r.match(/(\w)/,!1)&&(v=!0)));r=G(g);if("*"===m||"_"===m&&!v){if(g.strong===m&&f.eat(m)&&f.peek(m))return g.strong=!1,r;if(!g.strong&&f.eat(m)&&f.peek(m))return g.strong=m,G(g);if(g.em===m)return g.em=!1,r;if(!g.em)return g.em=m,G(g)}else if("~"===m){if(g.strike===
m&&f.eat(m))return g.strike=!1,r;if(!g.strike&&f.eat(m))return g.strike=m,G(g)}else if(" "===m&&(f.eat("*")||f.eat("_"))){if(" "===f.peek())return G(g);f.backUp(1)}" "===m&&(f.match(/ +$/,!1)?g.trailingSpace++:g.trailingSpace&&(g.trailingSpaceNewLine=!0));return G(g)}function T(f,g){if(f.eatSpace())return null;var m=f.next();return"("===m||"["===m?t(f,g,ra("string","("===m?")":"]")):"error"}function ca(f,g){return f.match(/^[^\]]*\]:/,!0)?(g.f=da,"link"):t(f,g,ia)}function da(f,g){if(f.eatSpace())return null;
f.match(/^[^\s]+/,!0);void 0===f.peek()?g.linkTitle=!0:f.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0);g.f=g.inline=ia;return"string"}function ea(f){wa[f]||(f=(f+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),wa[f]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+f+")"));return wa[f]}function ra(f,g,n){n=n||ia;return function(m,q){m.match(ea(g));q.inline=q.f=n;return f}}var W=F.modes.hasOwnProperty("xml"),Y=F.getMode(f,W?{name:"xml",htmlMode:!0}:"text/plain"),sa=
{html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},na=function(){var m,g={},n={},t=[];for(r in F.modes)F.modes.propertyIsEnumerable(r)&&t.push(r);for(m=0;m<t.length;m++)g[t[m]]=t[m];t=[];for(r in F.mimeModes)F.mimeModes.propertyIsEnumerable(r)&&t.push({mime:r,mode:F.mimeModes[r]});for(m=0;m<t.length;m++){var r=t[m].mime;n[r]=t[m].mime}for(var x in sa)if(sa[x]in g||sa[x]in
n)g[x]=sa[x];return function(m){return g[m]?F.getMode(f,g[m]):null}}();void 0===n.underscoresBreakWords&&(n.underscoresBreakWords=!0);void 0===n.fencedCodeBlocks&&(n.fencedCodeBlocks=!1);void 0===n.taskLists&&(n.taskLists=!1);var Ba=0,Ha=/^([*\-=_])(?:\s*\1){4,}\s*$/,ka=/^[*\-+]\s+/,Ia=/^[0-9]+\.\s+/,la=/^\[(x| )\](?=\s)/,ta=/^(?:={1,}|-{1,})$/,I=/^[^!\[\]*_~\\<>` "'(]+/,wa=[];return{startState:function(){return{f:r,prevLineHasContent:!1,thisLineHasContent:!1,block:r,htmlState:F.startState(Y),indentation:0,
inline:ia,text:X,linkText:!1,linkTitle:!1,em:!1,strong:!1,strike:!1,header:!1,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1}},copyState:function(f){return{f:f.f,prevLineHasContent:f.prevLineHasContent,thisLineHasContent:f.thisLineHasContent,block:f.block,htmlState:F.copyState(Y,f.htmlState),indentation:f.indentation,localMode:f.localMode,localState:f.localMode?F.copyState(f.localMode,f.localState):null,inline:f.inline,text:f.text,linkTitle:f.linkTitle,em:f.em,strong:f.strong,
strike:f.strike,header:f.header,taskList:f.taskList,list:f.list,listDepth:f.listDepth,quote:f.quote,trailingSpace:f.trailingSpace,trailingSpaceNewLine:f.trailingSpaceNewLine,md_inside:f.md_inside}},token:function(f,g){if(f.sol()){if(f.match(/^\s*$/,!0))return g.prevLineHasContent=!1,v(g);g.prevLineHasContent=g.thisLineHasContent;g.thisLineHasContent=!0;g.header=!1;g.taskList=!1;g.code=!1;g.trailingSpace=0;g.trailingSpaceNewLine=!1;g.f=g.block;var m=f.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,
n=4*Math.floor((m-g.indentation)/4);4<n&&(n=4);n=g.indentation+n;g.indentationDiff=n-g.indentation;g.indentation=n;if(0<m)return null}return g.f(f,g)},blankLine:v,getType:G}},"xml");F.defineMIME("text/x-markdown","markdown");var Yb=/Mac/.test(navigator.platform),W={"Cmd-B":da,"Cmd-I":Ba,"Cmd-K":Y,"Cmd-Alt-I":T,"Cmd-'":X,"Cmd-Alt-L":ea,"Cmd-L":Ia};A.toolbar=[{name:"bold",action:da},{name:"italic",action:Ba},"|",{name:"quote",action:X},{name:"unordered-list",action:Ia},{name:"ordered-list",action:ea},
"|",{name:"link",action:Y},{name:"image",action:T},"|",{name:"info",action:"http://lab.lepture.com/editor/markdown"},{name:"preview",action:na},{name:"fullscreen",action:rb}];A.markdown=function(f){if(window.marked)return marked(f)};A.prototype.render=function(f){f||(f=this.element||document.getElementsByTagName("textarea")[0]);if(!this._rendered||this._rendered!==f){this.element=f;var n=this.options,t=this,v={},r;for(r in W)(function(f){v[Xb(f)]=function(n){W[f](t)}})(r);v.Enter="newlineAndIndentContinueMarkdownList";
v.Tab="tabAndIndentContinueMarkdownList";v["Shift-Tab"]="shiftTabAndIndentContinueMarkdownList";this.codemirror=F.fromTextArea(f,{mode:"markdown",theme:"paper",tabSize:"2",indentWithTabs:!0,lineNumbers:!1,autofocus:!0,extraKeys:v});!1!==n.toolbar&&this.createToolbar();!1!==n.status&&this.createStatusbar();this._rendered=this.element}};A.prototype.createToolbar=function(f){if((f=f||this.options.toolbar)&&0!==f.length){var n=document.createElement("div");n.className="editor-toolbar";var t=this;t.toolbar=
{};for(var v=0;v<f.length;v++)(function(f){if(f.name)var r=qb(f.name,f);else"|"===f?(el=document.createElement("i"),el.className="separator",el.innerHTML="|",r=el):r=qb(f);f.action&&("function"===typeof f.action?r.onclick=function(n){f.action(t)}:"string"===typeof f.action&&(r.href=f.action,r.target="_blank"));t.toolbar[f.name||f]=r;n.appendChild(r)})(f[v]);var r=this.codemirror;r.on("cursorActivity",function(){var f=ca(r),n;for(n in t.toolbar){var v=t.toolbar[n];v.className=f[n]?v.className+" active":
v.className.replace(/\s*active\s*/g,"")}});f=r.getWrapperElement();f.parentNode.insertBefore(n,f);return n}};A.prototype.createStatusbar=function(f){if((f=f||this.options.status)&&0!==f.length){var n=document.createElement("div");n.className="editor-statusbar";for(var t,v=this.codemirror,r=0;r<f.length;r++)(function(f){var r=document.createElement("span");r.className=f;"words"===f?(r.innerHTML="0",v.on("update",function(){var f=v.getValue().match(/[a-zA-Z0-9_\u0392-\u03c9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),
n=0;if(null!==f)for(var t=0;t<f.length;t++)n=19968<=f[t].charCodeAt(0)?n+f[t].length:n+1;r.innerHTML=n})):"lines"===f?(r.innerHTML="0",v.on("update",function(){r.innerHTML=v.lineCount()})):"cursor"===f&&(r.innerHTML="0:0",v.on("cursorActivity",function(){t=v.getCursor();r.innerHTML=t.line+":"+t.ch}));n.appendChild(r)})(f[r]);f=this.codemirror.getWrapperElement();f.parentNode.insertBefore(n,f.nextSibling);return n}};A.prototype.value=function(f){return f?(this.codemirror.getDoc().setValue(f),this):
this.codemirror.getValue()};A.toggleBold=da;A.toggleItalic=Ba;A.toggleBlockquote=X;A.toggleUnOrderedList=Ia;A.toggleOrderedList=ea;A.drawLink=Y;A.drawImage=T;A.undo=sb;A.redo=tb;A.togglePreview=na;A.toggleFullScreen=rb;A.prototype.toggleBold=function(){da(this)};A.prototype.toggleItalic=function(){Ba(this)};A.prototype.toggleBlockquote=function(){X(this)};A.prototype.toggleUnOrderedList=function(){Ia(this)};A.prototype.toggleOrderedList=function(){ea(this)};A.prototype.drawLink=function(){Y(this)};
A.prototype.drawImage=function(){T(this)};A.prototype.undo=function(){sb(this)};A.prototype.redo=function(){tb(this)};A.prototype.togglePreview=function(){na(this)};A.prototype.toggleFullScreen=function(){rb(this)};zc.Editor=A})(this);