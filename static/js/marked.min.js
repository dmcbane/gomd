(function(){function t(a){this.tokens=[];this.tokens.links={};this.options=a||l.defaults;this.rules=h.normal;this.options.gfm&&(this.rules=this.options.tables?h.tables:h.gfm)}function q(a,d){this.options=d||l.defaults;this.links=a;this.rules=k.normal;if(!this.links)throw Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?k.breaks:k.gfm:this.options.pedantic&&(this.rules=k.pedantic)}function n(a){this.tokens=[];this.token=null;this.options=a||l.defaults}
function m(a,d){return a.replace(d?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function p(a,d){a=a.source;d=d||"";return function w(b,c){if(!b)return new RegExp(a,d);c=c.source||c;c=c.replace(/(^|[^\[])\^/g,"$1");a=a.replace(b,c);return w}}function u(){}function r(a){for(var d=1,g,b;d<arguments.length;d++)for(b in g=arguments[d],g)Object.prototype.hasOwnProperty.call(g,b)&&(a[b]=g[b]);return a}function l(a,d,g){if(g||"function"===
typeof d){g||(g=d,d=null);d=r({},l.defaults,d||{});var b=d.highlight,c=0;try{var h=t.lex(a,d)}catch(v){return g(v)}var f=h.length;var e=function(){try{var a=n.parse(h,d)}catch(x){var c=x}d.highlight=b;return c?g(c):g(null,a)};if(!b||3>b.length)return e();delete d.highlight;if(!f)return e();for(;c<h.length;c++)(function(a){return"code"!==a.type?--f||e():b(a.text,a.lang,function(c,b){if(null==b||b===a.text)return--f||e();a.text=b;a.escaped=!0;--f||e()})})(h[c])}else try{return d&&(d=r({},l.defaults,
d)),n.parse(t.lex(a,d),d)}catch(v){v.message+="\nPlease report this to https://github.com/chjj/marked.";if((d||l.defaults).silent)return"<p>An error occured:</p><pre>"+m(v.message+"",!0)+"</pre>";throw v;}}var h={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,
html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/};h.item=p(h.item,"gm")(/bull/g,h.bullet)();h.list=p(h.list)(/bull/g,h.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)();h._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b";
h.html=p(h.html)("comment",/\x3c!--[\s\S]*?--\x3e/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,h._tag)();h.paragraph=p(h.paragraph)("hr",h.hr)("heading",h.heading)("lheading",h.lheading)("blockquote",h.blockquote)("tag","<"+h._tag)("def",h.def)();h.normal=r({},h);h.gfm=r({},h.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/});h.gfm.paragraph=p(h.paragraph)("(?!","(?!"+h.gfm.fences.source.replace("\\1","\\2")+"|"+h.list.source.replace("\\1",
"\\3")+"|")();h.tables=r({},h.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});t.rules=h;t.lex=function(a,d){return(new t(d)).lex(a)};t.prototype.lex=function(a){a=a.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n");return this.token(a,!0)};t.prototype.token=function(a,d){a=a.replace(/^ +$/gm,"");for(var g,b,c,k,f,e,l;a;){if(c=this.rules.newline.exec(a))a=a.substring(c[0].length),
1<c[0].length&&this.tokens.push({type:"space"});if(c=this.rules.code.exec(a))a=a.substring(c[0].length),c=c[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?c:c.replace(/\n+$/,"")});else if(c=this.rules.fences.exec(a))a=a.substring(c[0].length),this.tokens.push({type:"code",lang:c[2],text:c[3]});else if(c=this.rules.heading.exec(a))a=a.substring(c[0].length),this.tokens.push({type:"heading",depth:c[1].length,text:c[2]});else if(d&&(c=this.rules.nptable.exec(a))){a=
a.substring(c[0].length);f={type:"table",header:c[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:c[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:c[3].replace(/\n$/,"").split("\n")};for(e=0;e<f.align.length;e++)/^ *-+: *$/.test(f.align[e])?f.align[e]="right":/^ *:-+: *$/.test(f.align[e])?f.align[e]="center":/^ *:-+ *$/.test(f.align[e])?f.align[e]="left":f.align[e]=null;for(e=0;e<f.cells.length;e++)f.cells[e]=f.cells[e].split(/ *\| */);this.tokens.push(f)}else if(c=this.rules.lheading.exec(a))a=
a.substring(c[0].length),this.tokens.push({type:"heading",depth:"="===c[2]?1:2,text:c[1]});else if(c=this.rules.hr.exec(a))a=a.substring(c[0].length),this.tokens.push({type:"hr"});else if(c=this.rules.blockquote.exec(a))a=a.substring(c[0].length),this.tokens.push({type:"blockquote_start"}),c=c[0].replace(/^ *> ?/gm,""),this.token(c,d),this.tokens.push({type:"blockquote_end"});else if(c=this.rules.list.exec(a)){a=a.substring(c[0].length);k=c[2];this.tokens.push({type:"list_start",ordered:1<k.length});
c=c[0].match(this.rules.item);g=!1;l=c.length;for(e=0;e<l;e++)f=c[e],b=f.length,f=f.replace(/^ *([*+-]|\d+\.) +/,""),~f.indexOf("\n ")&&(b-=f.length,f=this.options.pedantic?f.replace(/^ {1,4}/gm,""):f.replace(new RegExp("^ {1,"+b+"}","gm"),"")),this.options.smartLists&&e!==l-1&&(b=h.bullet.exec(c[e+1])[0],k===b||1<k.length&&1<b.length||(a=c.slice(e+1).join("\n")+a,e=l-1)),b=g||/\n\n(?!\s*$)/.test(f),e!==l-1&&(g="\n"===f.charAt(f.length-1),b||(b=g)),this.tokens.push({type:b?"loose_item_start":"list_item_start"}),
this.token(f,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(c=this.rules.html.exec(a))a=a.substring(c[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===c[1]||"script"===c[1]||"style"===c[1],text:c[0]});else if(d&&(c=this.rules.def.exec(a)))a=a.substring(c[0].length),this.tokens.links[c[1].toLowerCase()]={href:c[2],title:c[3]};else if(d&&(c=this.rules.table.exec(a))){a=a.substring(c[0].length);f={type:"table",header:c[1].replace(/^ *| *\| *$/g,
"").split(/ *\| */),align:c[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:c[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(e=0;e<f.align.length;e++)/^ *-+: *$/.test(f.align[e])?f.align[e]="right":/^ *:-+: *$/.test(f.align[e])?f.align[e]="center":/^ *:-+ *$/.test(f.align[e])?f.align[e]="left":f.align[e]=null;for(e=0;e<f.cells.length;e++)f.cells[e]=f.cells[e].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(f)}else if(d&&(c=this.rules.paragraph.exec(a)))a=a.substring(c[0].length),
this.tokens.push({type:"paragraph",text:"\n"===c[1].charAt(c[1].length-1)?c[1].slice(0,-1):c[1]});else if(c=this.rules.text.exec(a))a=a.substring(c[0].length),this.tokens.push({type:"text",text:c[0]});else if(a)throw Error("Infinite loop on byte: "+a.charCodeAt(0));}return this.tokens};var k={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^\x3c!--[\s\S]*?--\x3e|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,
nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/};k.link=p(k.link)("inside",k._inside)("href",k._href)();k.reflink=p(k.reflink)("inside",k._inside)();k.normal=r({},k);k.pedantic=
r({},k.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/});k.gfm=r({},k.normal,{escape:p(k.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:p(k.text)("]|","~]|")("|","|https?://|")()});k.breaks=r({},k.gfm,{br:p(k.br)("{2,}","*")(),text:p(k.gfm.text)("{2,}","*")()});q.rules=k;q.output=function(a,d,g){return(new q(d,g)).output(a)};q.prototype.output=function(a){for(var d=
"",g,b;a;)if(b=this.rules.escape.exec(a))a=a.substring(b[0].length),d+=b[1];else if(b=this.rules.autolink.exec(a))a=a.substring(b[0].length),"@"===b[2]?(g=":"===b[1].charAt(6)?this.mangle(b[1].substring(7)):this.mangle(b[1]),b=this.mangle("mailto:")+g):b=g=m(b[1]),d+='<a href="'+b+'">'+g+"</a>";else if(b=this.rules.url.exec(a))a=a.substring(b[0].length),b=g=m(b[1]),d+='<a href="'+b+'">'+g+"</a>";else if(b=this.rules.tag.exec(a))a=a.substring(b[0].length),d+=this.options.sanitize?m(b[0]):b[0];else if(b=
this.rules.link.exec(a))a=a.substring(b[0].length),d+=this.outputLink(b,{href:b[2],title:b[3]});else if((b=this.rules.reflink.exec(a))||(b=this.rules.nolink.exec(a)))a=a.substring(b[0].length),g=(b[2]||b[1]).replace(/\s+/g," "),(g=this.links[g.toLowerCase()])&&g.href?d+=this.outputLink(b,g):(d+=b[0].charAt(0),a=b[0].substring(1)+a);else if(b=this.rules.strong.exec(a))a=a.substring(b[0].length),d+="<strong>"+this.output(b[2]||b[1])+"</strong>";else if(b=this.rules.em.exec(a))a=a.substring(b[0].length),
d+="<em>"+this.output(b[2]||b[1])+"</em>";else if(b=this.rules.code.exec(a))a=a.substring(b[0].length),d+="<code>"+m(b[2],!0)+"</code>";else if(b=this.rules.br.exec(a))a=a.substring(b[0].length),d+="<br>";else if(b=this.rules.del.exec(a))a=a.substring(b[0].length),d+="<del>"+this.output(b[1])+"</del>";else if(b=this.rules.text.exec(a))a=a.substring(b[0].length),d+=m(this.smartypants(b[0]));else if(a)throw Error("Infinite loop on byte: "+a.charCodeAt(0));return d};q.prototype.outputLink=function(a,
d){return"!"!==a[0].charAt(0)?'<a href="'+m(d.href)+'"'+(d.title?' title="'+m(d.title)+'"':"")+">"+this.output(a[1])+"</a>":'<img src="'+m(d.href)+'" alt="'+m(a[1])+'"'+(d.title?' title="'+m(d.title)+'"':"")+">"};q.prototype.smartypants=function(a){return this.options.smartypants?a.replace(/--/g,"\u2014").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):a};q.prototype.mangle=function(a){for(var d=
"",g=a.length,b=0,c;b<g;b++)c=a.charCodeAt(b),.5<Math.random()&&(c="x"+c.toString(16)),d+="&#"+c+";";return d};n.parse=function(a,d){return(new n(d)).parse(a)};n.prototype.parse=function(a){this.inline=new q(a.links,this.options);this.tokens=a.reverse();for(a="";this.next();)a+=this.tok();return a};n.prototype.next=function(){return this.token=this.tokens.pop()};n.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0};n.prototype.parseText=function(){for(var a=this.token.text;"text"===
this.peek().type;)a+="\n"+this.next().text;return this.inline.output(a)};n.prototype.tok=function(){switch(this.token.type){case "space":return"";case "hr":return"<hr>\n";case "heading":return"<h"+this.token.depth+' id="'+this.token.text.toLowerCase().replace(/[^\w]+/g,"-")+'">'+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case "code":if(this.options.highlight){var a=this.options.highlight(this.token.text,this.token.lang);null!=a&&a!==this.token.text&&(this.token.escaped=!0,this.token.text=
a)}this.token.escaped||(this.token.text=m(this.token.text,!0));return"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case "table":var d,g;a="<thead>\n<tr>\n";for(d=0;d<this.token.header.length;d++){var b=this.inline.output(this.token.header[d]);a+="<th";this.token.align[d]&&(a+=' style="text-align:'+this.token.align[d]+'"');a+=">"+b+"</th>\n"}a+="</tr>\n</thead>\n<tbody>\n";for(d=0;d<this.token.cells.length;d++){b=this.token.cells[d];
a+="<tr>\n";for(g=0;g<b.length;g++){var c=this.inline.output(b[g]);a+="<td";this.token.align[g]&&(a+=' style="text-align:'+this.token.align[g]+'"');a+=">"+c+"</td>\n"}a+="</tr>\n"}return"<table>\n"+(a+"</tbody>\n</table>\n");case "blockquote_start":for(a="";"blockquote_end"!==this.next().type;)a+=this.tok();return"<blockquote>\n"+a+"</blockquote>\n";case "list_start":d=this.token.ordered?"ol":"ul";for(a="";"list_end"!==this.next().type;)a+=this.tok();return"<"+d+">\n"+a+"</"+d+">\n";case "list_item_start":for(a=
"";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return"<li>"+a+"</li>\n";case "loose_item_start":for(a="";"list_item_end"!==this.next().type;)a+=this.tok();return"<li>"+a+"</li>\n";case "html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case "paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case "text":return"<p>"+this.parseText()+"</p>\n"}};u.exec=u;l.options=l.setOptions=function(a){r(l.defaults,
a);return l};l.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1};l.Parser=n;l.parser=n.parse;l.Lexer=t;l.lexer=t.lex;l.InlineLexer=q;l.inlineLexer=q.output;l.parse=l;"object"===typeof exports?module.exports=l:"function"===typeof define&&define.amd?define(function(){return l}):this.marked=l}).call(function(){return this||("undefined"!==typeof window?window:global)}());